import{_ as T,a as m,c as p,b as t,z as P,r as u,o as A,d as C,u as v,t as d,F as k,m as S,e as B,n as V,j as I}from "./app-417fc4a4.js";import{B as L,s as F}from "./basecomponent.esm-c24a460c.js";import{h as _}from "./moment-a9aaa855.js";var U={root:{position:"relative"}},Y={root:"p-chart"},z=L.extend({name:"chart",inlineStyles:U,classes:Y}),K={name:"BaseChart",extends:F,props:{type:String,data:null,options:null,plugins:null,width:{type:Number,default:300},height:{type:Number,default:150},canvasProps:{type:null,default:null}},style:z,provide:function(){return{$parentInstance:this}}},g={name:"Chart",extends:K,emits:["select","loaded"],chart:null,watch:{data:{handler:function(){this.reinit()},deep:!0},type:function(){this.reinit()},options:function(){this.reinit()}},mounted:function(){this.initChart()},beforeUnmount:function(){this.chart&&(this.chart.destroy(),this.chart=null)},methods:{initChart:function(){var s=this;T(()=>import("./auto-7e4f156a.js"),[]).then(function(o){s.chart&&(s.chart.destroy(),s.chart=null),o&&o.default&&(s.chart=new o.default(s.$refs.canvas,{type:s.type,data:s.data,options:s.options,plugins:s.plugins})),s.$emit("loaded",s.chart)})},getCanvas:function(){return this.$canvas},getChart:function(){return this.chart},getBase64Image:function(){return this.chart.toBase64Image()},refresh:function(){this.chart&&this.chart.update()},reinit:function(){this.initChart()},onCanvasClick:function(s){if(this.chart){var o=this.chart.getElementsAtEventForMode(s,"nearest",{intersect:!0},!1),i=this.chart.getElementsAtEventForMode(s,"dataset",{intersect:!0},!1);o&&o[0]&&i&&this.$emit("select",{originalEvent:s,element:o[0],dataset:i})}},generateLegend:function(){if(this.chart)return this.chart.generateLegend()}}};function y(a){"@babel/helpers - typeof";return y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},y(a)}function R(a, s){var o=Object.keys(a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);s&&(i=i.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),o.push.apply(o,i)}return o}function D(a){for(var s=1; s<arguments.length; s++){var o=arguments[s]!=null?arguments[s]:{};s%2?R(Object(o),!0).forEach(function(i){W(a,i,o[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(o)):R(Object(o)).forEach(function(i){Object.defineProperty(a,i,Object.getOwnPropertyDescriptor(o,i))})}return a}function W(a, s, o){return s=q(s),s in a?Object.defineProperty(a,s,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[s]=o,a}function q(a){var s=G(a,"string");return y(s)=="symbol"?s:String(s)}function G(a, s){if(y(a)!="object"||!a)return a;var o=a[Symbol.toPrimitive];if(o!==void 0){var i=o.call(a,s||"default");if(y(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(a)}var H=["width","height"];function J(a, s, o, i, b, f){return m(),p("div",P({class:a.cx("root"),style:a.sx("root")},a.ptm("root"),{"data-pc-name":"chart"}),[t("canvas",P({ref:"canvas",width:a.width,height:a.height,onClick:s[0]||(s[0]=function(x){return f.onCanvasClick(x)})},D(D({},a.canvasProps),a.ptm("canvas"))),null,16,H)],16)}g.render=J;const Q={class:""},X={class:"card"},Z=t("div",{class:"card"},null,-1),tt={class:"row"},et={class:"col-lg-8 d-flex align-items-strech"},st={class:"card w-100"},at={class:"card-body"},ot=t("div",{class:"d-sm-flex d-block align-items-center justify-content-between mb-9"},[t("div",{class:"mb-3 mb-sm-0"},[t("h5",{class:"card-title fw-semibold"},"Sales Overview")])],-1),rt={class:"col-lg-4"},nt={class:"row"},it={class:"col-lg-12"},lt={class:"card overflow-hidden"},ct={class:"card-body p-4"},dt={class:"card-title mb-9 fw-semibold"},ut={class:"row align-items-center"},ht={class:"col-5"},mt={class:"fw-semibold mb-3"},pt={class:"col-4"},bt={class:"d-flex justify-content-center"},ft={class:"col-lg-12"},vt={class:"card"},_t={class:"card-body"},gt={class:"row alig n-items-start"},yt=B('<div class="col-8"><h5 class="card-title mb-9 fw-semibold"> Monthly Earnings </h5><h4 class="fw-semibold mb-3">$6,820</h4><div class="d-flex align-items-center pb-1"><span class="me-2 rounded-circle bg-light-danger round-20 d-flex align-items-center justify-content-center"><i class="ti ti-arrow-down-right text-danger"></i></span><p class="text-dark me-1 fs-3 mb-0">+9%</p><p class="fs-3 mb-0">last year</p></div></div><div class="col-4"><div class="d-flex justify-content-end"><div class="text-white bg-secondary rounded-circle p-6 d-flex align-items-center justify-content-center"><i class="ti ti-currency-dollar fs-6"></i></div></div></div>',2),wt={class:"row"},Ct={class:"col-lg-4 d-flex align-items-stretch"},xt={class:"card w-100"},Mt={class:"card-body p-4"},Ot=t("div",{class:"mb-4"},[t("h5",{class:"card-title fw-semibold"},"Recent Transactions")],-1),jt={class:"timeline-widget mb-0 position-relative mb-n5"},kt={class:"timeline-item d-flex position-relative overflow-hidden"},St={class:"timeline-time text-dark flex-shrink-0 text-end"},Pt=t("div",{class:"timeline-badge-wrap d-flex flex-column align-items-center"},[t("span",{class:"timeline-badge border-2 border border-primary flex-shrink-0 my-8"}),t("span",{class:"timeline-badge-border d-block flex-shrink-0"})],-1),Rt={class:"timeline-desc fs-3 text-dark mt-n1"},Dt={class:"col-lg-8 d-flex align-items-stretch"},Bt={class:"card w-100"},$t={class:"card-body p-4"},Et=t("h5",{class:"card-title fw-semibold mb-4"},"Recent Transactions",-1),Nt={class:"table-responsive"},Tt={class:"table text-nowrap mb-0 align-middle"},At=t("thead",{class:"text-dark fs-4"},[t("tr",null,[t("th",{class:"border-bottom-0"},[t("h6",{class:"fw-semibold mb-0"},"Rental Id")]),t("th",{class:"border-bottom-0"},[t("h6",{class:"fw-semibold mb-0"},"Customer")]),t("th",{class:"border-bottom-0"},[t("h6",{class:"fw-semibold mb-0"},"Vehicle")]),t("th",{class:"border-bottom-0"},[t("h6",{class:"fw-semibold mb-0"},"status")]),t("th",{class:"border-bottom-0"},[t("h6",{class:"fw-semibold mb-0"},"Price")])])],-1),Vt={class:"border-bottom-0"},It={class:"fw-semibold mb-0"},Lt={class:"border-bottom-0"},Ft={class:"fw-semibold mb-1"},Ut={class:"fw-normal"},Yt={class:"border-bottom-0"},zt={class:"mb-0 fw-normal"},Kt={class:"border-bottom-0"},Wt={class:"d-flex align-items-center gap-2"},qt=t("td",{class:"border-bottom-0"},[t("h6",{class:"fw-semibold mb-0 fs-4"},"$3.9")],-1),Gt={class:"row"},Ht={class:"col-sm-6 col-xl-3"},Jt={class:"card overflow-hidden rounded-2"},Qt={class:"position-relative"},Xt={href:"javascript:void(0)"},Zt=["src"],te={class:"card-body pt-3 p-4"},ee={class:"fw-semibold fs-4"},se={class:"d-flex align-items-center justify-content-between"},ae={class:"fw-semibold fs-4 mb-0"},oe=t("span",{class:"ms-2 fw-normal text-muted fs-3"}," USD",-1),re=B('<ul class="list-unstyled d-flex align-items-center mb-0"><li><a class="me-1" href="javascript:void(0)"><i class="ti ti-star text-warning"></i></a></li><li><a class="me-1" href="javascript:void(0)"><i class="ti ti-star text-warning"></i></a></li><li><a class="me-1" href="javascript:void(0)"><i class="ti ti-star text-warning"></i></a></li><li><a class="me-1" href="javascript:void(0)"><i class="ti ti-star text-warning"></i></a></li><li><a class="" href="javascript:void(0)"><i class="ti ti-star text-warning"></i></a></li></ul>',1),ne=t("div",{class:"py-6 px-6 text-center"},[t("p",{class:"mb-0 fs-4"},"Design and Developed by @Autours")],-1),de={__name:"Index",setup(a){const s=u(),o=u(),i=u(),b=u(),f=u(),x=u(""),w=u(""),M=u(),O=u(),j=u();function c(){for(var r="0123456789ABCDEF",l="#",n=0; n<6; n++)l+=r[Math.floor(Math.random()*16)];return l}const $=async()=>{var r;try{const l=await axios.get("/get/user/data");x.value=l.data,((r=l.data)==null?void 0:r.role)==="admin"?E():N()}catch(l){console.log(l)}},E=async()=>{try{const r=await axios.get("/dashboard"),l=r.data.data.supplierRevenue;s.value={labels:l.map(e=>e.supplier_name),datasets:[{label:"Revenue",data:l.map(e=>e.profit),backgroundColor:l.map(e=>c()),borderColor:l.map(e=>c()),borderWidth:2,borderRadius:12}]};const n=r.data.data.NumberOfActiveSuppliers;w.value=n==null?void 0:n.currentYear,i.value={supplierCount:n.monthly.map(e=>e.count),labels:n.monthly.map(e=>_(e.month,"M").format("MMMM")),datasets:[{data:n.monthly.map(e=>e.count),backgroundColor:n.monthly.map(e=>c()),hoverBackgroundColor:n.monthly.map(e=>c())}]};const h=r.data.data.numberOfRentalsMonthly;b.value={labels:[1,2,3,4,5,6,7,8,9,10,11,"12"].map(e=>_(e,"M").format("MMM")),datasets:[{label:"Cancelled Rentals",data:h.cancelled.map(e=>e.count),fill:!0,borderColor:c(),tension:.4},{label:"Done Rentals",data:h.done.map(e=>e.count),fill:!0,borderColor:c(),tension:.4}]},o.value={labels:["A","B","C"],datasets:[{data:[540,325,702],backgroundColor:[1,2,3,4,5,6,7,8,9,10,11,"12"].map(()=>c()),hoverBackgroundColor:[1,2,3,4,5,6,7,8,9,10,11,"12"].map(()=>c())}]},M.value=r.data.data.latestRentalsTransactions,O.value=r.data.data.latestVehicles,j.value=r.data.data.customerTransactions}catch(r){console.log(r)}},N=async()=>{try{const r=await axios.get("/supplier-dashboard"),l=r.data.data.supplierRevenue;s.value={labels:l.map(e=>e.branch_name),datasets:[{label:"Revenue",data:l.map(e=>e.profit),backgroundColor:l.map(()=>c()),borderColor:l.map(()=>c()),borderWidth:2,borderRadius:12}]};const n=r.data.data.NumberOfActiveVehicles;w.value=n==null?void 0:n.currentYear,i.value={supplierCount:n.monthly.map(e=>e.count),labels:n.monthly.map(e=>_(e.month,"M").format("MMMM")),datasets:[{data:n.monthly.map(e=>e.count),backgroundColor:n.monthly.map(e=>c()),hoverBackgroundColor:n.monthly.map(e=>c())}]};const h=r.data.data.numberOfRentalsMonthly;b.value={labels:[1,2,3,4,5,6,7,8,9,10,11,"12"].map(e=>_(e,"M").format("MMM")),datasets:[{label:"Cancelled Rentals",data:h.cancelled.map(e=>e.count),fill:!0,borderColor:c(),tension:.4},{label:"Done Rentals",data:h.done.map(e=>e.count),fill:!0,borderColor:c(),tension:.4}]},o.value={labels:["A","B","C"],datasets:[{data:[540,325,702],backgroundColor:[1,2,3,4,5,6,7,8,9,10,11,"12"].map(()=>c()),hoverBackgroundColor:[1,2,3,4,5,6,7,8,9,10,11,"12"].map(()=>c())}]},M.value=r.data.data.latestRentalsTransactions,O.value=r.data.data.latestVehicles,j.value=r.data.data.customerTransactions}catch(r){console.log(r)}};return A(()=>{$()}),(r, l)=>{var n,h;return m(),p("div",Q,[t("div",X,[Z,t("div",tt,[t("div",et,[t("div",st,[t("div",at,[ot,C(v(g),{type:"bar",data:s.value,options:f.value},null,8,["data","options"]),C(v(g),{type:"line",data:b.value,class:"h-[30rem]"},null,8,["data"])])])]),t("div",rt,[t("div",nt,[t("div",it,[t("div",lt,[t("div",ct,[t("h5",dt,"Current year Number of suppliers "+d((n=w.value[0])==null?void 0:n.year),1),t("div",ut,[t("div",ht,[t("h4",mt,d((h=w.value[0])==null?void 0:h.count)+" Companies",1)]),t("div",pt,[t("div",bt,[C(v(g),{type:"doughnut",data:i.value,options:f.value,class:"w-full md:w-[30rem]"},null,8,["data","options"])])])])])])]),t("div",ft,[t("div",vt,[t("div",_t,[t("div",gt,[yt,C(v(g),{type:"pie",data:o.value,options:f.value,class:"w-full md:w-[30rem]"},null,8,["data","options"])])])])])])])]),t("div",wt,[t("div",Ct,[t("div",xt,[t("div",Mt,[Ot,t("ul",jt,[(m(!0),p(k,null,S(M.value, e=>(m(),p("li",kt,[t("div",St,d(v(_)(e.updated_at).format("LT")),1),Pt,t("div",Rt,"New rentals "+d(e.order_number)+" with "+d(e.price)+"$ ",1)]))),256))])])])]),t("div",Dt,[t("div",Bt,[t("div",$t,[Et,t("div",Nt,[t("table",Tt,[At,t("tbody",null,[(m(!0),p(k,null,S(j.value, e=>(m(),p("tr",null,[t("td",Vt,[t("h6",It,"#"+d(e.order_number),1)]),t("td",Lt,[t("h6",Ft,d(e.customer.name),1),t("span",Ut,d(e.customer.phone_num),1)]),t("td",Yt,[t("p",zt,d(e.vehicle.name),1)]),t("td",Kt,[t("div",Wt,[t("span",{class:V(e.order_status==1?"badge rounded-3 fw-semibold bg-primary":e.order_status==2?"badge rounded-3 fw-semibold bg-success":e.order_status==3?"badge rounded-3 fw-semibold bg-danger":e.order_status==4?"badge rounded-3 fw-semibold bg-warning":e.order_status==7?"badge rounded-3 fw-semibold bg-dark":"")},d(e.status.name_en),3)])]),qt]))),256))])])])])])])]),t("div",Gt,[(m(!0),p(k,null,S(O.value, e=>(m(),p("div",Ht,[t("div",Jt,[t("div",Qt,[t("a",Xt,[t("img",{src:"/img/vehicles/"+e.photo,width:"250",height:"250",class:"card-img-top rounded-0",alt:"..."},null,8,Zt)])]),t("div",te,[t("h6",ee,d(e.name),1),t("div",se,[t("h6",ae,[I(d(e.price)+" ",1),oe]),re])])])]))),256))]),ne])])}}};export{de as default};
