import"./base-006c1490.js";import{E as ie}from"./el-switch-527c84d8.js";import"./el-input-6a853cb5.js";/* empty css               *//* empty css                  */import"./el-scrollbar-3fe9b6f7.js";import{r as s,o as ne,am as de,a as i,c as v,b as e,w as ce,d as U,l as k,i as re,f as F,v as M,u as ue,q as P,F as x,m as C,e as ve,j as G,t as R,n as pe,O as fe}from"./app-30bfa28d.js";import{s as he}from"./editor.esm-ba1cabcf.js";import{d as me}from"./index-730c8ef6.js";/* empty css                    */import{E as _e,a as be}from"./index-9021004d.js";import"./validator-0602e0e9.js";import"./typescript-3a767c6c.js";import"./index-ee9cdf57.js";import"./basecomponent.esm-caf987f9.js";import"./scroll-f882c87e.js";import"./_baseIteratee-287b9fba.js";const ge={class:"card"},ye={class:"card-body"},we=e("h3",{class:"card-title fw-semibold mb-4"},"Edit Vehicle ",-1),Ve={class:"card"},ke={class:"card-body"},Pe={class:"row mb-5"},$e=e("h4",null,"Car Details",-1),xe={class:"mb-3 mt-4 col-12"},Ce=e("label",{class:"formbold-form-label"},"Vehicle Photo",-1),Le=e("div",{class:"display-none",style:{color:"red"},id:"photo"},[e("li",null,"Please select Photo")],-1),Se=e("div",{class:"d-flex",style:{gap:"10px",margin:"2px"}},"Select Photo..",-1),Ue={class:"d-flex",style:{gap:"10px"}},De=["src"],Ne={class:"col-4 mt-5"},Oe=["src"],Te={class:"formbold-mb-3 col-md-3"},Ee=e("label",{class:"formbold-form-label"}," Vehicle Name ",-1),ze=e("div",{class:"display-none",style:{color:"red"},id:"name"},[e("li",null,"Vehicle Name is required")],-1),Fe={class:"formbold-mb-3 col-3"},Be=e("label",{class:"formbold-form-label col-12"},"Pickup Location",-1),qe=e("div",{class:"display-none",style:{color:"red"},id:"pickupLoc"},[e("li",null,"Please select Pickup location")],-1),Ie={class:"countries"},Me={class:"formbold-mb-3 col-3"},je=e("label",{class:"formbold-form-label col-12"},"Category",-1),Re=e("div",{class:"display-none",style:{color:"red"},id:"category"},[e("li",null,"Pleasee select Category")],-1),We={class:"formbold-mb-3 col-3"},Je=e("label",{class:"formbold-form-label col-12"},"Location Types",-1),Ye=e("div",{class:"display-none",style:{color:"red"},id:"category"},[e("li",null,"Please select Vehicle Location Type")],-1),Ae={class:"formbold-mb-3 col-3"},Ge=e("label",{class:"form bold-form-label"},"Fuel Policy",-1),He={class:"countries"},Ke={class:"formbold-mb-3 mb-5 col-3"},Qe=e("label",{class:"formbold-form-label"}," Reserve Without Confirmation ",-1),Xe={class:"formbold-mb-3 mb-5 col-12"},Ze=e("label",{class:"formbold-form-label"}," Vehicle Description ",-1),el=e("div",{class:"display-none",style:{color:"red"},id:"description"},[e("li",null,"Vehicle Description is required")],-1),ll=e("hr",null,null,-1),ol={class:"row"},al=e("h4",null,"Prices Section ",-1),sl={class:"formbold-mb-3 col-4"},tl=e("label",{class:"formbold-form-label"},"Price 1-2 days",-1),il=e("div",{class:"display-none",style:{color:"red"},id:"price"},[e("li",null,"Price 1-2 days is required")],-1),nl={class:"input-with-percent"},dl={class:"formbold-mb-3 col-4"},cl=e("label",{class:"formbold-form-label"},"3 - 7 Days Price",-1),rl=e("div",{class:"display-none",style:{color:"red"},id:"weekPrice"},[e("li",null,"Price 3-7 days is required")],-1),ul={class:"input-with-percent"},vl={class:"formbold-mb-3 col-4"},pl=e("label",{class:"formbold-form-label"},"8-30 Days Price",-1),fl=e("div",{class:"display-none",style:{color:"red"},id:"monthPrice"},[e("li",null,"Price 8-30 days is required")],-1),hl={class:"input-with-percent"},ml=e("hr",null,null,-1),_l=e("h4",null," What is included ? ",-1),bl={class:"row"},gl={class:"formbold-mb-3 col-6"},yl={style:{height:"250px"}},wl=e("hr",null,null,-1),Vl=e("h4",null," Specifications ",-1),kl={class:"row"},Pl={class:"formbold-form-label col-5"},$l=["onClick"],xl=e("option",{value:""}," -- No Option -- ",-1),Cl=["value","selected"],Ll=ve('<hr><div style="height:100px;"></div><div class="row justify-content-center"><div class="col-md-2 ml-5"><button type="submit" class="btn btn-primary p-3" style="color:#0a3622;">Submit </button></div><div class="col-md-5"><a href="/vehicles" class="btn btn-danger p-3">Cancel</a></div></div>',3),Al={__name:"EditVehicle",setup(Sl){const B=me.useToast(),f=s(""),m=s(""),_=s(""),b=s(""),g=s(""),y=s(""),w=s(""),d={loading:s(!1),all:s([]),list:s([]),options:s([])},q=s(!1),h={loading:s(!1),all:s([]),list:s([]),options:s([])},V=s(""),D=s({}),N=s(),L={loading:s(!1),all:s([]),list:s([]),options:s([])},c={loading:s(!1),all:s([]),list:s([]),options:s([])},I=s([]),O={loading:s(!1),all:s([]),list:s([]),options:s([])};s([]);const W=s([]),T=s([]);s([]);let n={};const r={loading:s(!1),all:s([]),list:s([]),options:s([])},H=(o,l,t)=>{const u={name:o,selectedOption:t.target.value,icon:l};if(!T.value.some(p=>(p==null?void 0:p.name)===o))t.target.value!==""&&T.value.push(u);else{const p=T.value.find(a=>(a==null?void 0:a.name)===o);p&&(p.selectedOption=u.selectedOption)}},K=async()=>{c.loading.value=!0;try{const o=await axios.get("/get/categories");c.all.value=o.data,c.list.value=c.all.value.map(l=>({id:`${l.id}`,label:`${l==null?void 0:l.name}`}))}catch(o){console.error(o)}finally{c.loading.value=!1}},J=o=>{o?(c.loading.value=!0,setTimeout(()=>{c.loading.value=!1,c.options.value=c.list.value.filter(l=>l.label.toLowerCase().includes(o.toLowerCase()))},200)):c.options.value=c.list.value},Q=async()=>{d.loading.value=!0;try{const o=await axios.get("/get/branches");d.all.value=o.data,d.list.value=d.all.value.map(l=>({id:`${l.id}`,label:`${l==null?void 0:l.name}`}))}catch(o){console.error(o)}finally{d.loading.value=!1}},Y=o=>{o?(d.loading.value=!0,setTimeout(()=>{d.loading.value=!1,d.options.value=d.list.value.filter(l=>l.label.toLowerCase().includes(o.toLowerCase()))},200)):d.options.value=d.list.value},X=async()=>{r.loading.value=!0;try{const o=await axios.get("/get/photos");r.all.value=o.data,r.list.value=r.all.value.map(l=>({id:`${l.id}`,label:`${l==null?void 0:l.name}`,photo:`${l.photo}`}))}catch(o){console.error(o)}finally{r.loading.value=!1}},A=o=>{o?(r.loading.value=!0,setTimeout(()=>{r.loading.value=!1,r.options.value=r.list.value.filter(l=>l.label.toLowerCase().includes(o.toLowerCase()))},200)):r.options.value=r.list.value},Z=()=>{let o=!0;return b.value===""||b.value===[]||b.value===null||b.value===void 0?($("#price").show(),o=!1):$("#price").hide(),g.value===""||g.value===[]||g.value===null||g.value===void 0?($("#weekPrice").show(),o=!1):$("#weekPrice").hide(),y.value===""||y.value===[]||y.value===null||y.value===void 0?($("#monthPrice").show(),o=!1):$("#monthPrice").hide(),f.value===""||f.value===[]||f.value===null||f.value===void 0?($("#photo").show(),o=!1):$("#photo").hide(),m.value===""||m.value===[]||m.value===null||m.value===void 0?($("#name").show(),o=!1):$("#name").hide(),_.value===""||_.value===[]||_.value===null||_.value===void 0?($("#description").show(),o=!1):$("#description").hide(),V.value===""||V.value===[]||V.value===null||V.value===void 0?($("#category").show(),o=!1):$("#category").hide(),w.value===""||w.value===[]||w.value===null||w.value===void 0?($("#pickupLoc").show(),o=!1):$("#pickupLoc").hide(),o},ee=async()=>{try{const o=new FormData;if(o.append("photo",f.value),o.append("name",m.value),o.append("description",_.value),o.append("price",b.value),o.append("week_price",g.value),o.append("month_price",y.value),o.append("pickupLoc",w.value),o.append("category",V.value),T.value.length&&o.append("specifications",JSON.stringify(T.value)),o.append("included",I.value),o.append("update","1"),o.append("instant_confirmation",q.value),o.append("id",n.id),isNaN(D.value)||o.append("location_types",D.value),isNaN(N.value)||o.append("fuel_policy",N.value),!Z())return;console.log("====>"),console.log(D.value);const l=await axios.post("/post/vehicles",o);le(l.data),fe.get("/vehicles")}catch(o){console.log(o),B.error(o.response.data.message,{position:"top"})}},le=o=>{o.status?B.success("Your Vehicle Updated Successfully",{position:"top"}):B.error(error.response.message,{position:"top"})},oe=async()=>{var o,l,t,u,E,p,a;try{const S=new URLSearchParams(window.location.search).get("id"),j=await axios.get("/edit/vehicles/"+S);n=(o=j==null?void 0:j.data)==null?void 0:o.data,m.value=n==null?void 0:n.name,w.value=(l=n.branch)==null?void 0:l.name,V.value=(t=n.category)==null?void 0:t.name,_.value=n.description,b.value=n.price,g.value=n.week_price,y.value=n.month_price,W.value=n.specifications,T.value=n.specifications,I.value=n.what_is_included,f.value=n.photo,D.value=n.location_type.length?(u=n.location_type[0])==null?void 0:u.name:null,N.value=(E=n.fuel_policy)==null?void 0:E.name,q.value=n.instant_confirmation===1}catch(z){console.log("=====error==>"),console.log(z),B.error((a=(p=z.response)==null?void 0:p.data)==null?void 0:a.message,{position:"top"})}},ae=async()=>{L.loading.value=!0;try{const o=await axios.get("/get/fuel-policies",{});L.all.value=o.data,L.list.value=L.all.value.map(l=>({id:`${l.id}`,label:`${l==null?void 0:l.name}`,value:`${l==null?void 0:l.name}`}))}catch(o){console.error(o)}finally{L.loading.value=!1}},se=async()=>{O.loading.value=!0;try{const o=await axios.get("/get/included");O.all.value=o.data,O.list.value=O.all.value.map(l=>({id:`${l.id}`,label:`${l.what_is_included}`}))}catch(o){console.error(o)}finally{O.loading.value=!1}},te=async()=>{var o;h.loading.value=!0;try{const l=await axios.get("/get/location-types");h.all.value=l.data.data,h.list.value=(o=h.all.value)==null?void 0:o.map(t=>({id:`${t.id}`,label:`${t==null?void 0:t.name}`,photo:`${t==null?void 0:t.name}`}))}catch(l){console.error(l)}finally{h.loading.value=!1}};return ne(()=>{Q(),K(),X(),se(),oe(),te(),ae()}),(o,l)=>{const t=be,u=_e,E=ie,p=de("b-scrollspy");return i(),v("div",ge,[e("div",ye,[we,e("div",Ve,[e("div",ke,[e("form",{onSubmit:ce(ee,["prevent"])},[e("div",Pe,[$e,e("div",xe,[Ce,Le,U(u,{modelValue:f.value,"onUpdate:modelValue":l[0]||(l[0]=a=>f.value=a),size:"large",filterable:"",remote:"","reserve-keyword":"",placeholder:"Photo...","remote-show-suffix":"","remote-method":A,loading:r.loading.value,onClick:l[1]||(l[1]=a=>A())},{default:k(()=>[(i(),P(t,{key:null,label:null,value:null},{default:k(()=>[Se]),_:1})),(i(!0),v(x,null,C(r.list.value,a=>(i(),P(t,{key:a.id,label:a.label,value:a.photo},{default:k(()=>[e("div",Ue,[e("img",{src:"/img/vehicles/"+a.photo,style:{width:"50px"}},null,8,De),G(" "+R(a.label),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","loading"]),e("div",Ne,[f.value?(i(),v("img",{key:0,src:"/img/vehicles/"+f.value,class:"mb-4 col-12",width:"300",height:"300"},null,8,Oe)):re("",!0)])]),e("div",Te,[Ee,ze,F(e("input",{"onUpdate:modelValue":l[2]||(l[2]=a=>m.value=a),type:"text",class:"formbold-form-input"},null,512),[[M,m.value]])]),e("div",Fe,[Be,qe,e("div",Ie,[U(u,{modelValue:w.value,"onUpdate:modelValue":l[3]||(l[3]=a=>w.value=a),size:"large",class:"col-12",filterable:"",remote:"","reserve-keyword":"",placeholder:"Pickup...","remote-show-suffix":"","remote-method":Y,loading:d.loading.value,onClick:l[4]||(l[4]=a=>Y())},{default:k(()=>[(i(!0),v(x,null,C(d.options.value,a=>(i(),P(t,{key:a.id,label:a.label,value:a.label},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])])]),e("div",Me,[je,Re,U(u,{modelValue:V.value,"onUpdate:modelValue":l[5]||(l[5]=a=>V.value=a),size:"large",class:"col-12",filterable:"",remote:"","reserve-keyword":"",placeholder:"Pickup...","remote-show-suffix":"","remote-method":J,loading:c.loading.value,onClick:l[6]||(l[6]=a=>J())},{default:k(()=>[(i(!0),v(x,null,C(c.list.value,a=>(i(),P(t,{key:a.id,label:a.label,value:a.id,"aria-selected":"true"},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])]),e("div",We,[Je,Ye,U(u,{modelValue:D.value,"onUpdate:modelValue":l[7]||(l[7]=a=>D.value=a),size:"large",class:"col-12",filterable:"",remote:"","reserve-keyword":"",placeholder:"Select Location Type...","remote-show-suffix":"",loading:h.loading.value},{default:k(()=>[(i(!0),v(x,null,C(h==null?void 0:h.list.value,a=>(i(),P(t,{key:a.id,label:a.label,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])]),e("div",Ae,[Ge,e("div",He,[U(u,{modelValue:N.value,"onUpdate:modelValue":l[8]||(l[8]=a=>N.value=a),size:"large",filterable:"",placeholder:"Select Fuel Policy...",loading:L.loading.value,required:""},{default:k(()=>[(i(!0),v(x,null,C(L.list.value,a=>(i(),P(t,{"aria-selected":a.id==N.value.value,key:a.label,label:a.label,value:a.id},null,8,["aria-selected","label","value"]))),128))]),_:1},8,["modelValue","loading"])])]),e("div",Ke,[Qe,U(E,{size:"large",modelValue:q.value,"onUpdate:modelValue":l[9]||(l[9]=a=>q.value=a)},null,8,["modelValue"])]),e("div",Xe,[Ze,el,U(ue(he),{modelValue:_.value,"onUpdate:modelValue":l[10]||(l[10]=a=>_.value=a),class:"col-6"},null,8,["modelValue"])])]),ll,e("div",ol,[al,e("div",sl,[tl,il,e("div",nl,[F(e("input",{"onUpdate:modelValue":l[11]||(l[11]=a=>b.value=a),type:"text",pattern:"[0-9]+([,.][0-9]+)?",class:"formbold-form-input col-6"},null,512),[[M,b.value]])])]),e("div",dl,[cl,rl,e("div",ul,[F(e("input",{"onUpdate:modelValue":l[12]||(l[12]=a=>g.value=a),type:"text",pattern:"[0-9]+([,.][0-9]+)?",class:"formbold-form-input col-6"},null,512),[[M,g.value]])])]),e("div",vl,[pl,fl,e("div",hl,[F(e("input",{"onUpdate:modelValue":l[13]||(l[13]=a=>y.value=a),type:"text",pattern:"[0-9]+([,.][0-9]+)?",class:"formbold-form-input col-6"},null,512),[[M,y.value]])])])]),ml,_l,e("div",bl,[e("div",gl,[e("div",yl,[F((i(),P(u,{modelValue:I.value,"onUpdate:modelValue":l[14]||(l[14]=a=>I.value=a),size:"large",filterable:"",remote:"",multiple:"",class:"col-5","reserve-keyword":"",placeholder:"Select features...","remote-show-suffix":""},{default:k(()=>[e("div",null,[(i(!0),v(x,null,C(O.list.value,a=>(i(),P(t,{key:a.id,label:a.label,value:a.label},null,8,["label","value"]))),128))])]),_:1},8,["modelValue"])),[[p]])])])]),wl,Vl,e("div",kl,[(i(!0),v(x,null,C(W.value,(a,z)=>(i(),v("div",{key:z,class:"formbold-mb-3 col-6"},[e("label",Pl,[G(R(a.name)+" - ",1),e("i",{class:pe("fa fa-"+a.icon)},null,2)]),e("select",{class:"col-md-5 form-select",onClick:S=>H(a.name,a.icon,S)},[xl,(i(!0),v(x,null,C(a.options,S=>(i(),v("option",{value:S,selected:a.selectedOption===S},R(S),9,Cl))),256))],8,$l)]))),128))]),Ll],32)])])])])}}};export{Al as default};
