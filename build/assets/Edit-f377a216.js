import"./base-006c1490.js";import{E as T}from"./el-form-item-08f8b895.js";import{E as j}from"./el-button-50047d3c.js";import{E as D}from"./el-input-6a853cb5.js";/* empty css               *//* empty css                  */import"./el-scrollbar-3fe9b6f7.js";import{r as t,o as I,a as r,c,b as a,d as n,l as m,f as _,v as g,i as q,F as h,m as y,q as w,j as $,O as M}from"./app-30bfa28d.js";import{d as R}from"./index-730c8ef6.js";/* empty css                    */import{E as G,a as H}from"./index-9021004d.js";import"./objects-59c3839e.js";import"./_initCloneObject-c174f230.js";import"./index-ee9cdf57.js";import"./use-global-config-8bd1557e.js";import"./typescript-3a767c6c.js";import"./scroll-f882c87e.js";import"./_baseIteratee-287b9fba.js";import"./validator-0602e0e9.js";const J={class:"card"},K={class:"card-body"},Q=a("h2",{class:"mb-4"},"Edit Branches",-1),W={class:"justify-content-center col-md-12"},X={key:0,class:"row"},Y={class:"formbold-mb-3 col-md-3"},Z=a("label",{class:"formbold-form-label"},"Name",-1),ee={class:"formbold-mb-3 col-md-3"},le=a("label",{class:"formbold-form-label"},"email",-1),oe={class:"formbold-mb-3 col-md-3"},ae=a("label",{class:"formbold-form-label"},"Phone",-1),te={class:"formbold-mb-3"},se=a("label",{class:"formbold-form-label ml-2"},"Branch Address Details",-1),re={class:"countries"},ne={class:"formbold-mb-3"},ie={class:"input-with-percent"},de={key:0,class:"formbold-mb-3 col-md-6"},ue=a("label",{class:"formbold-form-label"},"Currency",-1),ce={class:"countries"},me={class:"row"},ve={class:"formbold-mb-3 col-md-2"},pe=a("label",{class:"formbold-form-label"},"Latitude",-1),fe={class:"formbold-mb-3 col-md-2"},be=a("label",{class:"formbold-form-label"},"Longitude",-1),_e={class:"formbold-mb-3 col-md-8"},ge=a("label",{class:"formbold-form-label"},"Address",-1),he={class:"row"},ye={class:"col-md-3"},we={class:"col-md-3"},Ie={__name:"Edit",setup(Ve){t(""),t([]);const p=t(!1);t(!1);const x=t({}),v=t(""),k=t(!1),C=t(!1),E=R.useToast(),s=t({name:"",country:"",city:"",state:"",phone:"",email:"",abriviation:"",address:"",currency:"",lat:"",lng:""}),B={loading:t(!1),all:t([]),list:t([]),options:t([])},i={loading:t(!1),all:t([]),list:t([]),options:t([])},d={loading:t(!1),all:t([]),list:t([]),options:t([])};t(!1),t([]),t([]),t([]);const u={loading:t(!1),all:t([]),list:t([]),options:t([])},S=async()=>{try{p.value=!0;const o=await axios.get("/branches/edit/"+x.value);s.value=o.data.data,p.value=!1,console.log(o.data)}catch(o){p.value=!1,console.log(o)}},N=async()=>{try{const o=await axios.get("/get/user/role");v.value=o.data}catch(o){console.error(o)}finally{v.value==="admin"?admin.value=!0:v.value==="active_supplier"?k.value=!0:v.value==="supplier"?C.value=!0:v.value==="customer"?customer.value=!0:v.value==="reviewing"&&(reviewing.value=!0)}},z=async()=>{d.loading.value=!0;try{const o=await axios.get("https://countriesnow.space/api/v0.1/countries",{});d.all.value=o.data.data,d.list.value=d.all.value.map(l=>({id:`${l.id}`,label:`${l.country}`,iso:`${l.iso2}`}))}catch(o){console.error(o)}finally{d.loading.value=!1}},F=async()=>{try{const o=await axios.post("/branches/update",s.value);console.log(o),o.data.status&&E.success("Branch updated successfully",{position:"top"})}catch(o){E.error("Something went wrong",{position:"top"}),console.log(o)}},L=()=>{M.get("/branches")},P=async()=>{u.loading.value=!0;try{const o=await axios.get("/get/currencies",{});u.all.value=o.data,u.list.value=u.all.value.map(l=>({id:`${l.id}`,label:`${l.name}`,value:`${l.name}`}))}catch(o){console.error(o)}finally{u.loading.value=!1}},A=async()=>{try{if(s.value.country&&(i.loading.value=!0,console.log("-------------> "),console.log(s),s.value.country)){const o=await axios.post("https://countriesnow.space/api/v0.1/countries/cities",{country:s.value.country});i.all.value=o.data.data,i.list.value=i.all.value.map(l=>({value:`${l}`,label:`${l}`}))}}catch(o){console.error(o)}finally{i.loading.value=!1}};return I(async()=>{let o=new URLSearchParams(window.location.search);o.has("id")&&(x.value=await o.get("id")),await S(),await N(),await P(),await z()}),(o,l)=>{const V=D,f=H,b=G,U=j,O=T;return r(),c("div",J,[a("div",K,[Q,a("div",W,[p.value?q("",!0):(r(),c("div",X,[a("div",Y,[Z,n(V,{modelValue:s.value.name,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value.name=e),required:""},null,8,["modelValue"])]),a("div",ee,[le,n(V,{modelValue:s.value.email,"onUpdate:modelValue":l[1]||(l[1]=e=>s.value.email=e),required:""},null,8,["modelValue"])]),a("div",oe,[ae,n(V,{modelValue:s.value.phone,"onUpdate:modelValue":l[2]||(l[2]=e=>s.value.phone=e),required:""},null,8,["modelValue"])]),a("div",te,[se,a("div",re,[n(b,{modelValue:s.value.country,"onUpdate:modelValue":l[3]||(l[3]=e=>s.value.country=e),size:"large",class:"col-md-3",filterable:"",placeholder:"Country...",loading:d.loading.value,required:""},{default:m(()=>[(r(!0),c(h,null,y(d.list.value,e=>(r(),w(f,{key:e.id,label:e.label,value:e.label},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"]),n(b,{modelValue:s.value.city,"onUpdate:modelValue":l[4]||(l[4]=e=>s.value.city=e),size:"large",filterable:"",remote:"",class:"col-md-3","reserve-keyword":"",placeholder:"City...","remote-show-suffix":"","remote-method":o.remoteCountries,loading:i.loading.value,onClick:l[5]||(l[5]=e=>A()),required:""},{default:m(()=>[(r(!0),c(h,null,y(i.list.value,e=>(r(),w(f,{key:e.id,label:e.label,value:e.label},null,8,["label","value"]))),128))]),_:1},8,["modelValue","remote-method","loading"]),n(b,{modelValue:s.value.state,"onUpdate:modelValue":l[6]||(l[6]=e=>s.value.state=e),size:"large",filterable:"",class:"col-md-3",remote:"","reserve-keyword":"",placeholder:"Pickup...","remote-show-suffix":"","remote-method":o.remoteStates,loading:B.loading.value,required:""},{default:m(()=>[(r(!0),c(h,null,y(B.list.value,e=>(r(),w(f,{key:e.id,label:e.label,value:e.label},null,8,["label","value"]))),128))]),_:1},8,["modelValue","remote-method","loading"]),a("div",ne,[a("div",ie,[_(a("input",{"onUpdate:modelValue":l[7]||(l[7]=e=>s.value.abriviation=e),maxlength:"3",type:"text",placeholder:"Abriviation",style:{padding:"6px 22px","text-transform":"uppercase"},class:"formbold-form-input",required:""},null,512),[[g,s.value.abriviation]])])])])]),C.value||k.value?(r(),c("div",de,[ue,a("div",ce,[n(b,{modelValue:s.value.currency,"onUpdate:modelValue":l[8]||(l[8]=e=>s.value.currency=e),size:"large",filterable:"",remote:"","reserve-keyword":"",placeholder:"Currency...","remote-show-suffix":"",loading:u.loading.value,required:""},{default:m(()=>[(r(!0),c(h,null,y(u.list.value,e=>(r(),w(f,{key:e,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])])])):q("",!0),a("div",me,[a("div",ve,[pe,_(a("input",{"onUpdate:modelValue":l[9]||(l[9]=e=>s.value.lat=e),class:"form-control"},null,512),[[g,s.value.lat]])]),a("div",fe,[be,_(a("input",{"onUpdate:modelValue":l[10]||(l[10]=e=>s.value.lng=e),class:"form-control"},null,512),[[g,s.value.lng]])])]),a("div",_e,[ge,_(a("textarea",{"onUpdate:modelValue":l[11]||(l[11]=e=>s.value.adresse=e),class:"form-control",rows:"5",required:""},null,512),[[g,s.value.adresse]])]),n(O,null,{default:m(()=>[a("div",he,[a("div",ye,[n(U,{type:"primary",onClick:F},{default:m(()=>[$("Save Branch")]),_:1})]),a("div",we,[n(U,{class:"btn btn-danger",onClick:L},{default:m(()=>[$("Cancel")]),_:1})])])]),_:1})]))])])])}}};export{Ie as default};
