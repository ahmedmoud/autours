import{o as V,ap as q,Z as P,ak as J,aE as Q,G as _,ae as F,aj as Y,A as ee,d as oe,y as h,ao as te,r as D,k as z,S as ne,ac as se}from"./app-30bfa28d.js";import{p as g,u as $,a as R,F as G,a7 as le,D as ae,G as ue,b as H,d as O,n as ie,H as ce,am as de,f as U}from"./base-006c1490.js";import{i as re}from"./typescript-3a767c6c.js";import{t as fe,U as W,l as X,P as me}from"./el-scrollbar-3fe9b6f7.js";import{a as ve}from"./use-global-config-8bd1557e.js";import{g as ye}from"./scroll-f882c87e.js";var A=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(A||{});const Be=(e,o,s)=>{let u={offsetX:0,offsetY:0};const n=c=>{const y=c.clientX,i=c.clientY,{offsetX:d,offsetY:r}=u,f=e.value.getBoundingClientRect(),m=f.left,v=f.top,w=f.width,x=f.height,B=document.documentElement.clientWidth,N=document.documentElement.clientHeight,k=-m+d,I=-v+r,b=B-m-w+d,T=N-v-x+r,p=S=>{const C=Math.min(Math.max(d+S.clientX-y,k),b),L=Math.min(Math.max(r+S.clientY-i,I),T);u={offsetX:C,offsetY:L},e.value&&(e.value.style.transform=`translate(${g(C)}, ${g(L)})`)},M=()=>{document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",M)};document.addEventListener("mousemove",p),document.addEventListener("mouseup",M)},l=()=>{o.value&&e.value&&o.value.addEventListener("mousedown",n)},t=()=>{o.value&&e.value&&o.value.removeEventListener("mousedown",n)};V(()=>{q(()=>{s.value?l():t()})}),P(()=>{t()})},Ee=(e,o={})=>{J(e)||fe("[useLockscreen]","You need to pass a ref param to this function");const s=o.ns||$("popup"),u=Q(()=>s.bm("parent","hidden"));if(!R||G(document.body,u.value))return;let n=0,l=!1,t="0";const c=()=>{setTimeout(()=>{ue(document==null?void 0:document.body,u.value),l&&document&&(document.body.style.width=t)},200)};_(e,y=>{if(!y){c();return}l=!G(document.body,u.value),l&&(t=document.body.style.width),n=ye(s.namespace.value);const i=document.documentElement.clientHeight<document.body.scrollHeight,d=le(document.body,"overflowY");n>0&&(i||d==="scroll")&&l&&(document.body.style.width=`calc(100% - ${n}px)`),ae(document.body,u.value)}),F(()=>c())},pe=e=>{if(!e)return{onClick:Y,onMousedown:Y,onMouseup:Y};let o=!1,s=!1;return{onClick:t=>{o&&s&&e(t),o=s=!1},onMousedown:t=>{o=t.target===t.currentTarget},onMouseup:t=>{s=t.target===t.currentTarget}}},Ce=H({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:O([String,Array,Object])},zIndex:{type:O([String,Number])}}),Te={click:e=>e instanceof MouseEvent},Se="overlay";var be=ee({name:"ElOverlay",props:Ce,emits:Te,setup(e,{slots:o,emit:s}){const u=$(Se),n=y=>{s("click",y)},{onClick:l,onMousedown:t,onMouseup:c}=pe(e.customMaskEvent?void 0:n);return()=>e.mask?oe("div",{class:[u.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:l,onMousedown:t,onMouseup:c},[h(o,"default")],A.STYLE|A.CLASS|A.PROPS,["onClick","onMouseup","onMousedown"]):te("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[h(o,"default")])}});const Ne=be,Me=H({center:Boolean,alignCenter:Boolean,closeIcon:{type:re},customClass:{type:String,default:""},draggable:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),ke={close:()=>!0},Ie=H({...Me,appendToBody:Boolean,appendTo:{type:O(String),default:"body"},beforeClose:{type:O(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1},headerAriaLevel:{type:String,default:"2"}}),Ye={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[W]:e=>ie(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},_e=(e,o)=>{var s;const n=se().emit,{nextZIndex:l}=ce();let t="";const c=X(),y=X(),i=D(!1),d=D(!1),r=D(!1),f=D((s=e.zIndex)!=null?s:l());let m,v;const w=ve("namespace",de),x=z(()=>{const a={},E=`--${w.value}-dialog`;return e.fullscreen||(e.top&&(a[`${E}-margin-top`]=e.top),e.width&&(a[`${E}-width`]=g(e.width))),a}),B=z(()=>e.alignCenter?{display:"flex"}:{});function N(){n("opened")}function k(){n("closed"),n(W,!1),e.destroyOnClose&&(r.value=!1)}function I(){n("close")}function b(){v==null||v(),m==null||m(),e.openDelay&&e.openDelay>0?{stop:m}=U(()=>S(),e.openDelay):S()}function T(){m==null||m(),v==null||v(),e.closeDelay&&e.closeDelay>0?{stop:v}=U(()=>C(),e.closeDelay):C()}function p(){function a(E){E||(d.value=!0,i.value=!1)}e.beforeClose?e.beforeClose(a):T()}function M(){e.closeOnClickModal&&p()}function S(){R&&(i.value=!0)}function C(){i.value=!1}function L(){n("openAutoFocus")}function K(){n("closeAutoFocus")}function Z(a){var E;((E=a.detail)==null?void 0:E.focusReason)==="pointer"&&a.preventDefault()}e.lockScroll&&Ee(i);function j(){e.closeOnPressEscape&&p()}return _(()=>e.modelValue,a=>{a?(d.value=!1,b(),r.value=!0,f.value=me(e.zIndex)?l():f.value++,ne(()=>{n("open"),o.value&&(o.value.scrollTop=0)})):i.value&&T()}),_(()=>e.fullscreen,a=>{o.value&&(a?(t=o.value.style.transform,o.value.style.transform=""):o.value.style.transform=t)}),V(()=>{e.modelValue&&(i.value=!0,r.value=!0,b())}),{afterEnter:N,afterLeave:k,beforeLeave:I,handleClose:p,onModalClick:M,close:T,doClose:C,onOpenAutoFocus:L,onCloseAutoFocus:K,onCloseRequested:j,onFocusoutPrevented:Z,titleId:c,bodyId:y,closed:d,style:x,overlayDialogStyle:B,rendered:r,visible:i,zIndex:f}};export{Ne as E,ke as a,Ie as b,Ye as c,Me as d,_e as e,pe as f,Ee as g,Be as u};
