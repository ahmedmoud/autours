import{r as u,o as x,a as _,c as h,b as o,d as c,F as C,m as M,t as e,H as B,l as r,u as d,a3 as F,a4 as T,a5 as b,j as p,a6 as N,i as V,O as $}from"./app-30bfa28d.js";/* empty css                                                               */import{F as O}from"./Footer-c7ccbbc7.js";import{_ as S}from"./HeaderOne-b29838d2.js";import{d as z}from"./index-730c8ef6.js";/* empty css                    */import"./_plugin-vue_export-helper-c27b6911.js";const E={id:"wrapper"},H={class:"no-bottom no-top zebra",id:"content"},L=o("div",{id:"top"},null,-1),R={id:"section-car-details"},Y=o("div",{class:"container"},[o("div",{class:"mt-5"},[o("h2",null,"Bookings History ")]),o("hr")],-1),j={class:"container"},A={class:""},I={class:"card p-4 row shadow-2-strong flex-row",style:{width:"90%"}},P={class:"col-md-2"},q=["src"],G={class:"col-md-4"},J={class:"text-nowrap"},K={class:"row"},Q=["src"],U={class:"col-md-6 mt-4"},W={class:"col-md-5"},X={class:"row"},Z=o("strong",{class:"col-md-2 text-nowrap"},"Pick-up:",-1),oo={class:"col-md-10 text-nowrap"},so=o("strong",{class:"col-md-2 text-nowrap"},"Drop-off:",-1),to={class:"col-md-10 text-nowrap"},eo={class:"row"},ao=o("strong",{class:"col-md-5"}," Total price:",-1),lo={class:"col-md-4"},no={class:"col-md-1",style:{top:"0",right:"0"}},co=o("i",{class:"fa fa-bars"},null,-1),ro=o("i",{class:"fa fa-repeat"},null,-1),io=o("i",{class:"fa fa-download"},null,-1),_o=["disabled","onClick"],ho=o("i",{class:"fa fa-cancel"},null,-1),uo=o("hr",null,null,-1),ko={__name:"MyBookings",setup(po){const g=z.useToast(),l=u(!1),v=u("");u(!1);const m=async()=>{try{l.value=!0;const a=await axios.get("get/rentals");v.value=a.data,l.value=!1}catch(a){console.error(a)}},y=a=>{var n;try{const s=new Date,t=new Date;t.setDate(t.getDate()+1),console.log(t);const i={date_from:s.getFullYear()+"-"+(s.getMonth()<"10"?"0"+s.getMonth():s.getMonth())+"-"+s.getDate(),date_to:t.getFullYear()+"-"+(t.getMonth()<"10"?"0"+t.getMonth():t.getMonth())+"-"+t.getDate(),time_from:"00:00",time_to:"00:00",pickupLoc:(n=a.vehicle.branch)==null?void 0:n.location,id:a.vehicle.id};$.get("/vehicles/book",i)}catch{}},k=async a=>{try{l.value=!0;const n=await axios.post("/cancel/booking",a);console.log(n.status),n.status&&(g.warning("Rental has been Cancelled",{position:"top"}),m()),l.value=!1}catch(n){l.value=!1,g.error(n.response.data.message,{position:"top"})}};return x(()=>{m()}),(a,n)=>(_(),h("body",null,[o("div",E,[c(S),o("div",H,[L,o("section",R,[Y,o("div",j,[(_(!0),h(C,null,M(v.value,s=>{var t,i,f,w;return _(),h("div",A,[o("div",null,[o("h4",null,e((t=s.vehicle.branch)==null?void 0:t.city)+", "+e((i=s.vehicle.branch)==null?void 0:i.country),1),o("small",null,e(s.start_date+" , "+s.end_date),1)]),o("div",I,[o("div",P,[o("img",{src:"img/vehicles/"+s.vehicle.photo,width:"180",height:"100",alt:""},null,8,q)]),o("div",G,[o("div",J,[o("h5",null,e(s.vehicle.name)+" Or Similar ",1)]),o("strong",null,e(s.start_date+" - "+s.end_date),1),o("div",K,[o("img",{class:"col-md-4 rounded-3",src:"img/"+s.vehicle.supplier.logo,height:"80",width:"50"},null,8,Q),o("p",U,e(s.vehicle.supplier.name),1)]),o("strong",{style:B(s.order_status==2?"color: green":s.order_status==3?"color: red":s.order_status==4?"color: yellow":"color: gray")},e(s.status.name_en),5)]),o("div",W,[o("p",X,[Z,o("small",oo,e((f=s.vehicle.branch)==null?void 0:f.adresse),1),so,o("small",to,e((w=s.vehicle.branch)==null?void 0:w.adresse),1)]),o("p",eo,[ao,o("small",lo,e(s.currency)+" "+e(s.price),1)])]),o("div",no,[c(d(N),{togglerText:"Dropdown button",class:"mt-1 dropdown"},{default:r(()=>[c(d(F),{component:"a",style:{color:"rgba(30, 30, 30, 1)"}},{default:r(()=>[co]),_:1}),c(d(T),null,{default:r(()=>[c(d(b),{disabled:l.value,class:"cursor-pointer",style:{color:"black"},onClick:D=>y(s)},{default:r(()=>[ro,p(" Book again ")]),_:2},1032,["disabled","onClick"]),c(d(b),{disabled:l.value,class:"cursor-pointer",style:{color:"black"}},{default:r(()=>[io,p(" Download invoice ")]),_:1},8,["disabled"])]),_:2},1024)]),_:2},1024)]),s.order_status!=3?(_(),h("button",{key:0,disabled:l.value,class:"offset-10 col-md-2 cursor-pointer btn btn-danger",onClick:D=>k(s)},[ho,p(" Cancel ")],8,_o)):V("",!0)]),uo])}),256))])])])]),c(O)]))}};export{ko as default};
