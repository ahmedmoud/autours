import"./base-006c1490.js";import{E as P,a as I}from"./el-table-column-716264cc.js";import"./el-checkbox-5300d020.js";import"./el-tooltip-66a73e45.js";import"./el-scrollbar-3fe9b6f7.js";/* empty css               */import{E as G}from"./el-date-picker-b16c7706.js";import{E as H}from"./el-input-6a853cb5.js";import"./el-button-50047d3c.js";/* empty css                  */import{r as a,k as J,o as K,a as r,c as i,b as t,d as s,y as L,F as k,m as V,i as Q,l as _,j as y,t as w,u as x,C as W,q as B}from"./app-30bfa28d.js";import{m as M}from"./moment-98048a50.js";import{L as X}from"./Loader-edcef2dc.js";import{E as Z,a as ee}from"./index-9021004d.js";import"./objects-59c3839e.js";import"./_initCloneObject-c174f230.js";import"./isArrayLikeObject-f1e7b3e7.js";import"./_baseIteratee-287b9fba.js";import"./flatten-d513a695.js";import"./typescript-3a767c6c.js";import"./index-ee9cdf57.js";import"./use-global-config-8bd1557e.js";/* empty css                                                               */import"./_plugin-vue_export-helper-c27b6911.js";import"./scroll-f882c87e.js";import"./validator-0602e0e9.js";const le={class:"card"},ae={key:0,class:"modal-mask"},oe={key:0},te={key:1,class:"modal-container",ref:"target"},se={class:"modal-header"},re={class:"modal-body overflow-y-auto",style:{"max-height":"calc(100vh - 210px)"}},ne=t("h2",null,"Customer Feedback",-1),de=["item-key"],ie={class:"row col-md-12"},ue={class:"col-md-6 text-nowrap"},ce={class:"col-md-6 text-nowrap"},me={class:"modal-footer"},ve={class:"card-body"},pe={class:"row"},_e={class:"formbold-mb-3 col-md-2"},fe=t("label",{class:"formbold-form-label"},"Country",-1),be={class:"formbold-mb-3 col-md-2"},ge=t("label",{class:"formbold-form-label"},"Status",-1),he={class:"formbold-mb-3 col-md-2"},ye=t("label",{class:"formbold-form-label"},"Rental Reference",-1),we={class:"col-md-3 date-input"},Ce={class:""},ke=t("label",{class:"formbold-form-label"},"Select Date Range",-1),Ve=t("h2",{class:"mb-4"},"Reviews",-1),xe={class:"d-flex"},Re=["onClick"],$e=t("i",{class:"fa fa-star"},null,-1),ll={__name:"Reviews",setup(De){const b=a(""),R=a([]),u=a(!1),T=a(""),c=a("");a(""),a("");const m=a(""),v=a(""),C=a(!1),d={loading:a(!1),all:a([]),list:a([]),options:a([])};a(!1),a([]),a([]),a([]),a(!1),a([]),a([]),a([]);const $=a({}),g={loading:a(!1),all:a([]),list:a([]),options:a([])},q=async o=>{try{u.value=!0;const e=await axios.get("/rental/rate/"+o,{});console.log(e),e.data.status&&(C.value=!0,$.value=e.data.data),u.value=!1}catch{u.value=!1}},N=()=>{C.value=!1},U=async()=>{d.loading.value=!0;try{const o=await axios.get("/get/countries",{});d.all.value=o.data,console.log(o),d.list.value=d.all.value.map(e=>({id:`${e}`,label:`${e}`,iso:`${e}`}))}catch(o){console.error(o)}finally{d.loading.value=!1}},p=a(""),z=async()=>{try{const o=await axios.get("/get/user/role");T.value=o.data}catch(o){console.error(o)}},F=()=>{h()},h=async()=>{try{u.value=!0;const o={country:"",order_status:"",order_number:"",date_range:"",has_review:1};(p.value!==[]||p.value!=null||p.value!==void 0||p.value!=="")&&(o.order_status=p.value),(c.value!==[]||c.value!=null||c.value!==void 0||c.value!=="")&&(o.country=c.value),(m.value!==[]||m.value!=null||m.value!==void 0||m.value!=="")&&(o.order_number=m.value),(v.value!==[]||v.value!=null||v.value!==void 0||v.value!=="")&&(o.date_range=v.value);const e=await axios.get("/get/rentals",{params:o});R.value=e.data.rentals,g.all.value=e.data.rental_statuses,g.list.value=g.all.value.map(f=>({value:`${f.name_en}`,label:`${f.name_en}`,id:`${f.id}`})),g.loading.value=!1}catch(o){console.error(o)}finally{u.value=!1}},O=J(()=>R.value.filter(o=>!b.value||o.vehicle.name.toLowerCase().includes(b.value.toLowerCase())||o.order_number.toLowerCase().includes(b.value.toLowerCase())));return K(()=>{z(),h(),U()}),(o,e)=>{var S;const f=ee,D=Z,E=H,j=G,n=I,A=P;return r(),i("div",le,[C.value?(r(),i("div",ae,[t("div",{class:"modal-wrapper",onClick:e[1]||(e[1]=l=>o.$emit("close"))},[u.value?(r(),i("div",oe,[s(X)])):(r(),i("div",te,[t("div",se,[L(o.$slots,"header",{},()=>[y(" Rental Review")])]),t("div",re,[ne,(r(!0),i(k,null,V((S=$.value)==null?void 0:S.rental_rates,(l,Y)=>(r(),i("div",{"item-key":Y},[t("div",ie,[t("div",ue,w(l.question.objective),1),t("div",ce,[s(x(W),{style:{"border-radius":"10px"},value:l.rate*10},{default:_(()=>[y(w(l.rate)+" / 10",1)]),_:2},1032,["value"])])])],8,de))),256))]),t("div",me,[L(o.$slots,"footer",{},()=>[t("div",null,[t("button",{class:"btn btn-primary",onClick:e[0]||(e[0]=l=>N())},"Done")])])])],512))])])):Q("",!0),t("div",ve,[t("div",pe,[t("div",_e,[fe,s(D,{modelValue:c.value,"onUpdate:modelValue":e[2]||(e[2]=l=>c.value=l),size:"large",filterable:"",remote:"","reserve-keyword":"",placeholder:"Countries...","remote-show-suffix":"",loading:d.loading.value,onChange:e[3]||(e[3]=l=>h()),required:""},{default:_(()=>[(r(!0),i(k,null,V(d.list.value,l=>(r(),B(f,{key:l.id,label:l.label,value:l.label},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])]),t("div",be,[ge,s(D,{modelValue:p.value,"onUpdate:modelValue":e[4]||(e[4]=l=>p.value=l),size:"large",filterable:"",remote:"","reserve-keyword":"",placeholder:"Rental Status...","remote-show-suffix":"",style:{height:"35px"},loading:d.loading.value,onChange:e[5]||(e[5]=l=>F()),required:""},{default:_(()=>[(r(!0),i(k,null,V(g.all.value,l=>(r(),B(f,{key:l.id,label:l.name_en,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])]),t("div",he,[ye,s(E,{placeholder:"Reference...",modelValue:m.value,"onUpdate:modelValue":e[6]||(e[6]=l=>m.value=l),onChange:e[7]||(e[7]=l=>h()),style:{height:"35px"}},null,8,["modelValue"])]),t("div",we,[t("div",Ce,[ke,s(j,{modelValue:v.value,"onUpdate:modelValue":e[8]||(e[8]=l=>v.value=l),type:"daterange","range-separator":"TO","start-placeholder":"Start date","end-placeholder":"End date",size:"large",required:"true",format:"YYYY/MM/DD","value-format":"YYYY-MM-DD",style:{height:"35px"},onChange:h},null,8,["modelValue"])])])]),Ve,t("div",xe,[s(A,{data:O.value,style:{width:"100%"},loading:u.value,stripe:""},{default:_(()=>[s(n,{label:"Booking Reference",prop:"order_number"}),s(n,{label:"Vehicle",prop:"vehicle.name"}),s(n,{label:"Customer Name",prop:"customer.name"}),s(n,{label:"Country",prop:"customer.country"}),s(n,{label:"Started At",prop:"start_date"}),s(n,{label:"Ended At",prop:"end_date"}),s(n,{label:"Duration",align:"center",prop:"start_date"},{default:_(l=>[y(w(x(M)(l.row.end_date).diff(x(M)(l.row.start_date),"days")),1)]),_:1}),s(n,{label:"Review",align:"center",prop:"rate"},{default:_(l=>[t("a",{class:"btn btn-primary col-md-6",onClick:Y=>q(l.row.id),href:"#"},[y(w(l.row.rate)+" ",1),$e],8,Re)]),_:1}),s(n,{align:"right"},{header:_(()=>[s(E,{modelValue:b.value,"onUpdate:modelValue":e[9]||(e[9]=l=>b.value=l),size:"small",placeholder:"Type to search"},null,8,["modelValue"])]),_:1})]),_:1},8,["data","loading"])])])])}}};export{ll as default};
