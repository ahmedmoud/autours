import"./base-40151e19.js";import{E as k,a as g}from "./el-table-column-d728468a.js";import"./el-checkbox-8f2d8563.js";import"./el-tooltip-fe7a3ae3.js";import"./el-scrollbar-4d76fa87.js";import{E as N}from "./el-switch-bc3395f5.js";import{E}from "./el-input-5a2c3fae.js";/* empty css               */import{r as v,k as U,o as C,a as D,c as P,b as s,d as r,l as n,j as m,t as p}from "./app-417fc4a4.js";import{d as f}from "./index-5c14bedf.js";/* empty css                    *//* empty css                   */import"./objects-a3f7d715.js";import"./_initCloneObject-5d6a36d4.js";import"./isArrayLikeObject-38992b29.js";import"./_baseIteratee-ab40514f.js";import"./flatten-66fc93b5.js";import"./validator-3cef17f7.js";import"./typescript-8048a034.js";import"./index-e7076969.js";const T={class:"card"},A={class:"card-body"},L=s("h2",{class:"mb-4"},"Price List",-1),x={class:"card"},B={class:"card-body"},S={class:"d-flex"},z=["src"],F=["onClick"],j=s("i",{style:{color:"green"},class:"fa fa-check fa-2x"},null,-1),I=[j],ce={__name:"PriceList",setup(M){const u=v(!1),d=v(""),e=v([]),w=U(()=>(Array.isArray(e.value)?e.value:[]).filter(l=>!d.value||l.name.toLowerCase().includes(d.value.toLowerCase()))),_=async(t, l)=>{try{u.value=!0;const o=await axios.get("/get/vehicles");e.value=o.data;for(const i in e.value[t])data.value[i]=e.value[t][i]||""}catch(o){console.error(o)}finally{u.value=!1}},b=async t=>{const l=f.useToast();try{u.value=!0;const o=new FormData;if(e.value[t].price==null||e.value[t].price<=0||isNaN(e.value[t].price)){l.error("price should be numeric and more than 0",{position:"top"});return}if(e.value[t].week_price==null||e.value[t].week_price<=0||isNaN(e.value[t].week_price)){l.error("price should be numeric and more than 0",{position:"top"});return}if(e.value[t].month_price==null||e.value[t].month_price<=0||isNaN(e.value[t].month_price)){l.error("price should be numeric and more than 0",{position:"top"});return}o.append("id",e.value[t].id),o.append("price",e.value[t].price),o.append("week_price",e.value[t].week_price),o.append("month_price",e.value[t].month_price),o.append("update","1");const i=await axios.post("/edit-vehicle-price",o);l.success("Price List updated successfully to "+e.value[t].name,{position:"top"})}catch(o){l.error(o.message,{position:"top"})}finally{_()}},y=async t=>{u.value=!0;const l=f.useToast();try{const o=new FormData,i=e.value[t].activation?1:0;o.append("activation",i),o.append("vehicle_id",e.value[t].id);const h=await axios.post("update/vehicles/activation",o);l.success("Activation Status  updated successfully to "+e.value[t].name,{position:"top"})}catch(o){l.error(o.message,{position:"top"})}finally{u.value=!1}console.log($value)};return C(()=>{_()}),(t, l)=>{const o=g,i=E,h=N,V=k;return D(),P("div",T,[s("div",A,[L,s("div",x,[s("div",B,[s("div",S,[r(V,{data:w.value,style:{width:"100%"},loading:u.value,stripe:""},{default:n(()=>[r(o,{label:"Photo",prop:""},{default:n(a=>[s("img",{src:"/img/vehicles/"+a.row.photo,width:"150",height:"100"},null,8,z)]),_:1}),r(o,{label:"Name",prop:"name"}),r(o,{label:"1-2 days Price",prop:"price"},{default:n(a=>[r(i,{class:"col-6",modelValue:e.value[a.$index].price,"onUpdate:modelValue": c=>e.value[a.$index].price=c,value:a.row.price,placeholder:"1-2 price"},null,8,["modelValue","onUpdate:modelValue","value"]),m(p(a.row.branch.currency),1)]),_:1}),r(o,{label:"3-7 days Price",prop:"week_price"},{default:n(a=>[r(i,{class:"col-6",modelValue:e.value[a.$index].week_price,"onUpdate:modelValue": c=>e.value[a.$index].week_price=c,value:a.row.week_price,placeholder:"3-7 price"},null,8,["modelValue","onUpdate:modelValue","value"]),m(p(a.row.branch.currency),1)]),_:1}),r(o,{label:"8-30 days Price",prop:"month_price"},{default:n(a=>[r(i,{class:"col-6",modelValue:e.value[a.$index].month_price,"onUpdate:modelValue": c=>e.value[a.$index].month_price=c,value:a.row.month_price,placeholder:"4-30 price"},null,8,["modelValue","onUpdate:modelValue","value"]),m(p(a.row.branch.currency),1)]),_:1}),r(o,{label:"Branch Name - Location",prop:"branch"},{default:n(a=>[m(p(a.row.branch.name)+" - "+p(a.row.branch.location),1)]),_:1}),r(o,{label:"Actions"},{default:n(a=>[s("button",{class:"btn",onClick: c=>b(a.$index)},I,8,F),r(h,{size:"large",modelValue:e.value[a.$index].activation,"onUpdate:modelValue": c=>e.value[a.$index].activation=c,value:a.row.activation,onClick: c=>y(a.$index)},null,8,["modelValue","onUpdate:modelValue","value","onClick"])]),header:n(()=>[r(i,{modelValue:d.value,"onUpdate:modelValue":l[0]||(l[0]= a=>d.value=a),size:"large",placeholder:"Type to search"},null,8,["modelValue"])]),_:1})]),_:1},8,["data","loading"])])])])])])}}};export{ce as default};
