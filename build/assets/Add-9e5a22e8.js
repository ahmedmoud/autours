import"./base-006c1490.js";import{E as L}from"./el-form-item-08f8b895.js";import{E as O}from"./el-button-50047d3c.js";import{E as T}from"./el-input-6a853cb5.js";/* empty css               *//* empty css                  */import"./el-scrollbar-3fe9b6f7.js";import{r as t,o as j,a as r,c,b as a,d as n,l as m,f as b,v as _,i as U,F as y,m as g,q as h,j as $,O as D}from"./app-30bfa28d.js";import{d as I}from"./index-730c8ef6.js";/* empty css                    */import{E as M,a as P}from"./index-9021004d.js";import"./objects-59c3839e.js";import"./_initCloneObject-c174f230.js";import"./index-ee9cdf57.js";import"./use-global-config-8bd1557e.js";import"./typescript-3a767c6c.js";import"./scroll-f882c87e.js";import"./_baseIteratee-287b9fba.js";import"./validator-0602e0e9.js";const R={class:"card"},G={class:"card-body"},H=a("h2",{class:"mb-4"},"Add New Branch",-1),J={class:"justify-content-center col-md-12"},K={key:0,class:"row"},Q={class:"formbold-mb-3 col-md-3"},W=a("label",{class:"formbold-form-label"},"Name",-1),X={class:"formbold-mb-3 col-md-3"},Y=a("label",{class:"formbold-form-label"},"email",-1),Z={class:"formbold-mb-3 col-md-3"},ee=a("label",{class:"formbold-form-label"},"Phone",-1),le={class:"formbold-mb-3"},oe=a("label",{class:"formbold-form-label ml-2"},"Branch Address Details",-1),ae={class:"countries"},te={class:"formbold-mb-3"},se={class:"input-with-percent"},re={key:0,class:"formbold-mb-3 col-md-6"},ne=a("label",{class:"formbold-form-label"},"Currency",-1),ie={class:"countries"},de={class:"row"},ue={class:"formbold-mb-3 col-md-2"},ce=a("label",{class:"formbold-form-label"},"Latitude",-1),me={class:"formbold-mb-3 col-md-2"},ve=a("label",{class:"formbold-form-label"},"Longitude",-1),pe={class:"formbold-mb-3 col-md-8"},fe=a("label",{class:"formbold-form-label"},"Address",-1),be={class:"row"},_e={class:"col-md-3"},ye={class:"col-md-3"},je={__name:"Add",setup(ge){t(""),t([]);const B=t(!1);t(!1),t({});const v=t(""),w=t(!1),x=t(!1);I.useToast();const o=t({name:"",country:"",city:"",state:"",phone:"",email:"",abriviation:"",address:"",currency:"",lat:"",lng:""}),k={loading:t(!1),all:t([]),list:t([]),options:t([])},i={loading:t(!1),all:t([]),list:t([]),options:t([])},d={loading:t(!1),all:t([]),list:t([]),options:t([])};t(!1),t([]),t([]),t([]);const u={loading:t(!1),all:t([]),list:t([]),options:t([])},E=async()=>{try{const s=await axios.get("/get/user/role");v.value=s.data}catch(s){console.error(s)}finally{v.value==="admin"?admin.value=!0:v.value==="active_supplier"?w.value=!0:v.value==="supplier"?x.value=!0:v.value==="customer"?customer.value=!0:v.value==="reviewing"&&(reviewing.value=!0)}},q=async()=>{d.loading.value=!0;try{const s=await axios.get("https://countriesnow.space/api/v0.1/countries",{});d.all.value=s.data.data,d.list.value=d.all.value.map(l=>({id:`${l.id}`,label:`${l.country}`,iso:`${l.iso2}`}))}catch(s){console.error(s)}finally{d.loading.value=!1}},N=async()=>{o.value.location=`${o.value.country}, ${o.value.city}, (${o.value.abriviation.toUpperCase()})`;try{(await axios.post("/upload/branch",o.value)).data.message}catch(s){console.error(s)}},A=()=>{D.get("/branches")},z=async()=>{u.loading.value=!0;try{const s=await axios.get("/get/currencies",{});u.all.value=s.data,u.list.value=u.all.value.map(l=>({id:`${l.id}`,label:`${l.name}`,value:`${l.name}`}))}catch(s){console.error(s)}finally{u.loading.value=!1}},F=async()=>{try{if(o.value.country&&(i.loading.value=!0,console.log("-------------> "),console.log(o),o.value.country)){const s=await axios.post("https://countriesnow.space/api/v0.1/countries/cities",{country:o.value.country});i.all.value=s.data.data,i.list.value=i.all.value.map(l=>({value:`${l}`,label:`${l}`}))}}catch(s){console.error(s)}finally{i.loading.value=!1}};return j(async()=>{await E(),await z(),await q()}),(s,l)=>{const V=T,p=P,f=M,C=O,S=L;return r(),c("div",R,[a("div",G,[H,a("div",J,[B.value?U("",!0):(r(),c("div",K,[a("div",Q,[W,n(V,{modelValue:o.value.name,"onUpdate:modelValue":l[0]||(l[0]=e=>o.value.name=e),required:""},null,8,["modelValue"])]),a("div",X,[Y,n(V,{modelValue:o.value.email,"onUpdate:modelValue":l[1]||(l[1]=e=>o.value.email=e),required:""},null,8,["modelValue"])]),a("div",Z,[ee,n(V,{modelValue:o.value.phone,"onUpdate:modelValue":l[2]||(l[2]=e=>o.value.phone=e),required:""},null,8,["modelValue"])]),a("div",le,[oe,a("div",ae,[n(f,{modelValue:o.value.country,"onUpdate:modelValue":l[3]||(l[3]=e=>o.value.country=e),size:"large",class:"col-md-3",filterable:"",placeholder:"Country...",loading:d.loading.value,required:""},{default:m(()=>[(r(!0),c(y,null,g(d.list.value,e=>(r(),h(p,{key:e.id,label:e.label,value:e.label},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"]),n(f,{modelValue:o.value.city,"onUpdate:modelValue":l[4]||(l[4]=e=>o.value.city=e),size:"large",filterable:"",remote:"",class:"col-md-3","reserve-keyword":"",placeholder:"City...","remote-show-suffix":"","remote-method":s.remoteCountries,loading:i.loading.value,onClick:l[5]||(l[5]=e=>F()),required:""},{default:m(()=>[(r(!0),c(y,null,g(i.list.value,e=>(r(),h(p,{key:e.id,label:e.label,value:e.label},null,8,["label","value"]))),128))]),_:1},8,["modelValue","remote-method","loading"]),n(f,{modelValue:o.value.state,"onUpdate:modelValue":l[6]||(l[6]=e=>o.value.state=e),size:"large",filterable:"",class:"col-md-3",remote:"","reserve-keyword":"",placeholder:"Pickup...","remote-show-suffix":"","remote-method":s.remoteStates,loading:k.loading.value,required:""},{default:m(()=>[(r(!0),c(y,null,g(k.list.value,e=>(r(),h(p,{key:e.id,label:e.label,value:e.label},null,8,["label","value"]))),128))]),_:1},8,["modelValue","remote-method","loading"]),a("div",te,[a("div",se,[b(a("input",{"onUpdate:modelValue":l[7]||(l[7]=e=>o.value.abriviation=e),maxlength:"3",type:"text",placeholder:"Abriviation",style:{padding:"6px 22px","text-transform":"uppercase"},class:"formbold-form-input",required:""},null,512),[[_,o.value.abriviation]])])])])]),x.value||w.value?(r(),c("div",re,[ne,a("div",ie,[n(f,{modelValue:o.value.currency,"onUpdate:modelValue":l[8]||(l[8]=e=>o.value.currency=e),size:"large",filterable:"",remote:"","reserve-keyword":"",placeholder:"Currency...","remote-show-suffix":"",loading:u.loading.value,required:""},{default:m(()=>[(r(!0),c(y,null,g(u.list.value,e=>(r(),h(p,{key:e,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])])])):U("",!0),a("div",de,[a("div",ue,[ce,b(a("input",{"onUpdate:modelValue":l[9]||(l[9]=e=>o.value.lat=e),class:"form-control"},null,512),[[_,o.value.lat]])]),a("div",me,[ve,b(a("input",{"onUpdate:modelValue":l[10]||(l[10]=e=>o.value.lng=e),class:"form-control"},null,512),[[_,o.value.lng]])])]),a("div",pe,[fe,b(a("textarea",{"onUpdate:modelValue":l[11]||(l[11]=e=>o.value.adresse=e),class:"form-control",rows:"5",required:""},null,512),[[_,o.value.adresse]])]),n(S,null,{default:m(()=>[a("div",be,[a("div",_e,[n(C,{type:"primary",onClick:N},{default:m(()=>[$("Save Branch")]),_:1})]),a("div",ye,[n(C,{class:"btn btn-danger",onClick:A},{default:m(()=>[$("Cancel")]),_:1})])])]),_:1})]))])])])}}};export{je as default};
