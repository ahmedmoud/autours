import"./base-006c1490.js";import{E as U,a as z}from"./el-table-column-716264cc.js";import"./el-checkbox-5300d020.js";import"./el-tooltip-66a73e45.js";import"./el-scrollbar-3fe9b6f7.js";import{E as P}from"./el-button-50047d3c.js";import{E as j}from"./el-input-6a853cb5.js";/* empty css               */import{r,k as q,T as L,o as I,a as y,c as g,b as e,y as O,w as C,f as w,v as x,i as A,u as D,d as n,l as i,F as G,j as v,t as H}from"./app-30bfa28d.js";import{d as J}from"./index-730c8ef6.js";/* empty css                    */import"./objects-59c3839e.js";import"./_initCloneObject-c174f230.js";import"./isArrayLikeObject-f1e7b3e7.js";import"./_baseIteratee-287b9fba.js";import"./flatten-d513a695.js";import"./index-ee9cdf57.js";import"./use-global-config-8bd1557e.js";import"./typescript-3a767c6c.js";const K={key:0,class:"modal-mask"},Q={class:"modal-container",ref:"target"},R={class:"modal-header"},W={class:"modal-body overflow-y-auto",style:{"max-height":"calc(100vh - 210px)"}},X={class:"formbold-mb-3"},Y=e("label",{class:"formbold-form-label"}," Category Photo ",-1),Z=["src"],ee={class:"formbold-mb-3"},te=e("label",{class:"formbold-form-label"}," Category Name ",-1),oe=["placeholder"],ae={class:"text-center row"},se=e("div",{class:"col-md-4 offset-2"},[e("button",{type:"submit",class:"btn btn-primary"},"Submit")],-1),le={class:"col-md-2"},ne={class:"card"},re={class:"card-body"},ie=e("h2",{class:"mb-4"},"Categories",-1),de={class:"card"},ce={class:"card-body"},me={class:"formbold-mb-3"},ue=e("label",{class:"formbold-form-label"}," Category Photo ",-1),pe={class:"formbold-mb-3"},_e=e("label",{class:"formbold-form-label"}," Category Name ",-1),fe=e("div",{class:"text-center"},[e("button",{type:"submit",class:"btn btn-primary"},"Submit")],-1),ve={class:"d-flex justify-content-center col-md-12"},be=["src"],je={__name:"Categories",setup(he){const m=r(""),p=r([]),d=r(!1),u=r(!1),s=r({}),k=J.useToast(),_=async()=>{try{d.value=!0;const t=await axios.get("get/categories");p.value=t.data}catch(t){console.error(t)}finally{d.value=!1}},E=q(()=>p.value.filter(t=>!m.value||t.name.toLowerCase().includes(m.value.toLowerCase()))),b=t=>{f.value=t.target.files[0]},V=(t,a)=>{u.value=!0,s.value=a},$=async(t,a)=>{try{d.value=!0;const l=await axios.post("delete/categories",a);p.value=l.data}catch(l){console.error(l)}finally{d.value=!1}},c=L({name:""}),f=r(""),T=async()=>{try{const t=new FormData;t.append("photo",f.value),t.append("name",c.name);const a=await axios.post("post/categories",t)}catch(t){console.error(t)}finally{_(),c.reset()}},S=async()=>{try{const t=new FormData;t.append("photo",f.value),t.append("name",s.value.name),t.append("id",s.value.id),console.log(t),(await axios.post("update/categories",t)).status&&k.success("Category updated Successfully",{position:"top"}),u.value=!1}catch(t){console.error(t)}finally{_(),c.reset()}},N=()=>{u.value=!1,s.value={}};return I(()=>{_()}),(t,a)=>{const l=z,B=j,h=P,F=U;return y(),g(G,null,[u.value?(y(),g("div",K,[e("div",{class:"modal-wrapper",onClick:a[2]||(a[2]=o=>t.$emit("close"))},[e("div",Q,[e("div",R,[O(t.$slots,"header",{},()=>{var o;return[v(" Update "+H((o=s.value)==null?void 0:o.name)+" Category",1)]})]),e("div",W,[e("form",{onSubmit:C(S,["prevent"])},[e("div",X,[Y,e("img",{src:"img/categories/"+s.value.photo,width:"250",height:"250"},null,8,Z),e("input",{onChange:b,type:"file",class:"formbold-form-input formbold-form-file"},null,32)]),e("div",ee,[te,w(e("input",{"onUpdate:modelValue":a[0]||(a[0]=o=>s.value.name=o),placeholder:s.value.name,type:"text",class:"formbold-form-input",required:""},null,8,oe),[[x,s.value.name]])]),e("div",ae,[se,e("div",le,[e("button",{class:"btn btn-danger",onClick:a[1]||(a[1]=o=>N())},"Cancel")])])],32)])],512)])])):A("",!0),e("div",ne,[e("div",re,[ie,e("div",de,[e("div",ce,[e("form",{onSubmit:C(T,["prevent"])},[e("div",me,[ue,e("input",{onChange:b,type:"file",class:"formbold-form-input formbold-form-file"},null,32)]),e("div",pe,[_e,w(e("input",{"onUpdate:modelValue":a[3]||(a[3]=o=>D(c).name=o),type:"text",class:"formbold-form-input",required:""},null,512),[[x,D(c).name]])]),fe],32)]),e("div",ve,[n(F,{data:E.value,style:{width:"100%"},loading:d.value,stripe:""},{default:i(()=>[n(l,{label:"Photo",prop:""},{default:i(o=>[e("img",{src:"img/categories/"+o.row.photo,class:"w-50"},null,8,be)]),_:1}),n(l,{label:"Category",prop:"name"}),n(l,{align:"right"},{header:i(()=>[n(B,{modelValue:m.value,"onUpdate:modelValue":a[4]||(a[4]=o=>m.value=o),size:"small",placeholder:"Type to search"},null,8,["modelValue"])]),default:i(o=>[n(h,{size:"small",type:"warning",onClick:M=>V(o.$index,o.row)},{default:i(()=>[v("Edit ")]),_:2},1032,["onClick"]),n(h,{size:"small",type:"danger",onClick:M=>$(o.$index,o.row)},{default:i(()=>[v("Delete ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","loading"])])])])])],64)}}};export{je as default};
