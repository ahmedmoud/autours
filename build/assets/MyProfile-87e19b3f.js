import"./base-006c1490.js";import{E as L}from"./el-input-6a853cb5.js";/* empty css               *//* empty css                  */import"./el-scrollbar-3fe9b6f7.js";import{r as m,T as $,o as A,a as f,c as v,b as e,d,t as n,j as b,F as S,m as F,w as G,u as a,l as h,O as H,a3 as J,a4 as K,a5 as R,a6 as Q,n as W,i as X,q as Y}from"./app-30bfa28d.js";import{F as Z}from"./Footer-c7ccbbc7.js";import{_ as ee}from"./HeaderOne-b29838d2.js";import{d as te}from"./index-730c8ef6.js";/* empty css                    */import{h as M}from"./moment-a9aaa855.js";import{E as se,a as oe}from"./index-9021004d.js";import"./typescript-3a767c6c.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./index-ee9cdf57.js";import"./scroll-f882c87e.js";import"./_baseIteratee-287b9fba.js";import"./validator-0602e0e9.js";const le={id:"wrapper"},ae={class:"no-bottom no-top zebra",id:"content"},ne=e("div",{id:"top"},null,-1),ie={id:"section-car-details"},re={class:"container mt-5"},de={class:"card overflow-hidden"},ce={class:"card-body p-0"},ue=e("img",{src:"images/akrom.jpg",alt:"",class:"img-fluid"},null,-1),pe={class:"row align-items-center"},me={class:"col-lg-4 order-lg-1 order-2"},_e={class:"d-flex align-items-center justify-content-around m-4"},fe={class:"text-center"},be=e("i",{class:"fa fa-car fs-6 d-block mb-2"},null,-1),he={class:"mb-0 fw-semibold lh-1"},ve=e("p",{class:"mb-0 fs-4"},"Rentals",-1),ge={class:"text-center"},we=e("i",{class:"fa fa-cancel fs-6 d-block mb-2"},null,-1),ye={class:"mb-0 fw-semibold lh-1"},xe=e("p",{class:"mb-0 fs-4"},"Cancelled",-1),ke={class:"text-center"},Ce=e("i",{class:"fa fa-check fs-6 d-block mb-2"},null,-1),Pe={class:"mb-0 fw-semibold lh-1"},Ve=e("p",{class:"mb-0 fs-4"},"Confirmed",-1),Ee={class:"col-lg-4 mt-n3 order-lg-2 order-1"},je={class:"mt-n5"},De={class:"linear-gradient d-flex align-items-center justify-content-center rounded-circle",style:{width:"110px",height:"110px"}},Ie={class:"border border-4 border-white d-flex align-items-center justify-content-center rounded-circle overflow-hidden",style:{width:"100px",height:"100px"}},Se=["src"],Fe=e("i",{class:"cursor-pointer fa fa-pencil-square fa-xl mt-5"},null,-1),Re={class:"text-center"},Me={class:"fs-5 mb-0 fw-semibold"},Oe={class:"mb-0 fs-4"},Ue=e("ul",{class:"nav nav-pills user-profile-tab justify-content-end mt-2 bg-light-info rounded-2",id:"pills-tab",role:"tablist"},[e("li",{class:"nav-item",role:"presentation"},[e("button",{class:"nav-link position-relative rounded-0 active d-flex align-items-center justify-content-center bg-transparent fs-3 py-6",id:"pills-rentals-tab","data-bs-toggle":"pill","data-bs-target":"#pills-rentals",type:"button",role:"tab","aria-controls":"pills-rentals","aria-selected":"true"},[e("i",{class:"fa fa-car me-2 fs-6"}),e("span",{class:"d-none d-md-block"},"Rentals")])]),e("li",{class:"nav-item",role:"presentation"},[e("button",{class:"nav-link position-relative rounded-0 d-flex align-items-center justify-content-center bg-transparent fs-3 py-6",id:"pills-about-tab","data-bs-toggle":"pill","data-bs-target":"#pills-about",type:"button",role:"tab","aria-controls":"pills-about","aria-selected":"false",tabindex:"-1"},[e("i",{class:"fa fa-user me-2 fs-6"}),e("span",{class:"d-none d-md-block"},"About")])]),e("li",{class:"nav-item",role:"presentation"},[e("button",{class:"nav-link position-relative rounded-0 d-flex align-items-center justify-content-center bg-transparent fs-3 py-6",id:"pills-friends-tab","data-bs-toggle":"pill","data-bs-target":"#pills-friends",type:"button",role:"tab","aria-controls":"pills-friends","aria-selected":"false",tabindex:"-1"},[e("i",{class:"fa fa-credit-card me-2 fs-6"}),e("span",{class:"d-none d-md-block"},"My Cards")])])],-1),Be={class:"tab-content",id:"pills-tabContent"},qe={class:"tab-pane fade show active",id:"pills-rentals",role:"tabpanel","aria-labelledby":"pills-rentals-tab",tabindex:"0"},ze={class:"d-sm-flex align-items-center justify-content-between mt-3 mb-4"},Ne={class:"mb-3 mb-sm-0 fw-semibold d-flex align-items-center"},Te={class:"badge text-bg-secondary fs-2 rounded-4 py-1 px-2 ms-2"},Le=e("form",{class:"position-relative"},[e("input",{type:"text",class:"form-control search-chat py-2 ps-5",id:"text-srh",placeholder:"Search Friends"}),e("i",{class:"ti ti-search position-absolute top-50 start-0 translate-middle-y text-dark ms-3"})],-1),$e={class:"row"},Ae={class:"col-lg-4 col-12"},Ge={class:"card mb-5 rounded-3"},He={class:"col-md-1",style:{top:"0",left:"83%"}},Je=e("i",{class:"fa fa-bars"},null,-1),Ke=e("i",{class:"fa fa-repeat"},null,-1),Qe=e("i",{class:"fa fa-download"},null,-1),We=["src"],Xe={class:"avatar avatar-xl mt-n7 ms-4"},Ye=["src"],Ze={class:"card-body"},et={class:"mb-1"},tt=e("strong",null," Start Date:",-1),st=e("strong",null," End Date:",-1),ot={class:"d-flex justify-content-between align-items-center"},lt=["onClick"],at=e("i",{class:"fa fa-pencil"},null,-1),nt={class:"tab-pane fade show",id:"pills-about",role:"tabpanel","aria-labelledby":"pills-about-tab",tabindex:"1"},it={class:"row bg-white p-5 rounded-5"},rt={class:"row"},dt={class:"formbold-mb-3 col-md-4"},ct=e("label",{class:"formbold-form-label"},"Full name",-1),ut={class:"row"},pt={class:"formbold-mb-3 col-md-6"},mt=e("label",{class:"formbold-form-label"},"Country",-1),_t={class:"countries row"},ft={class:"formbold-mb-3 col-md-4"},bt=e("label",{class:"formbold-form-label"},"E-mail",-1),ht={class:"countries"},vt={class:"formbold-mb-3 col-md-4"},gt=e("label",{class:"formbold-form-label"},"Phone",-1),wt={class:"row"},Nt={__name:"MyProfile",setup(yt){const i=te.useToast(),l=m(!1),c=m(""),w=m(""),g={loading:m(!1),all:m([]),list:m([]),options:m([])},t=$({name:"",phone:"",email:"",password:"",mobile_code:"",country:"",user_type:"",supplier:0,gender:""}),O=async r=>{try{if(!confirm("Are you sure you want to update the profile picture ?"))return;w.value=r.target.files[0];const u=new FormData;u.append("logo",w.value),(await axios.post("upload",u)).data.message===1&&(i.success("profile picture updated successfully!",{position:"top"}),window.location.reload())}catch(o){console.log(o),i.error("Something went wrong!")}},U=async r=>{try{l.value=!0;const o=await axios.post("/cancel/booking",r);console.log(o.status),o.status&&(i.warning("Rental has been Cancelled",{position:"top"}),y()),l.value=!1}catch(o){l.value=!1,i.error(o.response.data.message,{position:"top"})}},B=(r,o)=>{try{var u=new Blob([r],{type:"application/pdf"});if(window.navigator&&window.navigator.msSaveOrOpenBlob){window.navigator.msSaveOrOpenBlob(u);return}const _=window.URL.createObjectURL(u);var p=document.createElement("a");p.style.display="none",p.href=_,p.download=o+".pdf",document.body.appendChild(p),p.click(),window.URL.revokeObjectURL(_)}catch(_){console.log("Error: ",_)}},q=async r=>{try{l.value=!0;const o=await axios.get("/invoice/booking/"+r.id,{responseType:"blob"});B(o.data,"file"),console.log(o),l.value=!1}catch(o){l.value=!1,i.error(o.response.data.message,{position:"top"})}},z=r=>{window.location.href="/update-booking?booking_id="+r},N=()=>{document.getElementById("profile_pic").click()},y=async()=>{try{l.value=!0;const r={},o=await axios.get("/my-current-user-profile");c.value=o.data.data,t.name=o.data.data.name,t.email=o.data.data.email,t.phone=o.data.data.phone_num,t.country=o.data.data.country,console.log(c.value)}catch{H.get("/")}finally{l.value=!1}},T=async()=>{if(l.value=!0,t.gender===void 0||t.gender===null||t.gender.length===0){i.error("Please Select Mr/Mrs",{position:"top"}),l.value=!1;return}if(t.name===void 0||t.name===null||t.name.length===0){i.error("Please Insert valid Name",{position:"top"}),l.value=!1;return}if(t.email===void 0||t.email===null||t.email.length===0){i.error("Please Insert valid Email",{position:"top"}),l.value=!1;return}if(t.phone===void 0||t.phone===null||t.phone.length===0){i.error("Please Insert valid Phone number",{position:"top"}),l.value=!1;return}if(t.mobile_code===void 0||t.mobile_code===null||t.mobile_code.length===0){i.error("Please Insert valid Phone number",{position:"top"}),l.value=!1;return}if(t.country===void 0||t.country===null||t.country.length===0){i.error("Please Insert Select Country",{position:"top"}),l.value=!1;return}if(t.password===void 0||t.password===null||t.password.length===0){i.error("Please Insert valid Password",{position:"top"}),l.value=!1;return}};return A(()=>{y()}),(r,o)=>{var x,k,C,P,V,E,j,D;const u=L,p=oe,_=se;return f(),v("body",null,[e("div",le,[d(ee),e("div",ae,[ne,e("section",ie,[e("div",re,[e("div",de,[e("div",ce,[ue,e("div",pe,[e("div",me,[e("div",_e,[e("div",fe,[be,e("h4",he,n((k=(x=c.value)==null?void 0:x.rentals)==null?void 0:k.length),1),ve]),e("div",ge,[we,e("h4",ye,n((P=(C=c.value)==null?void 0:C.rentals)==null?void 0:P.filter(function(s){return s.order_status===3}).length),1),xe]),e("div",ke,[Ce,e("h4",Pe,n((E=(V=c.value)==null?void 0:V.rentals)==null?void 0:E.filter(function(s){return s.order_status===2}).length),1),Ve])])]),e("div",Ee,[e("div",je,[e("div",{onClick:N,class:"d-flex align-items-center justify-content-center mb-2"},[e("div",De,[e("input",{type:"file",id:"profile_pic",onChange:O,hidden:""},null,32),e("div",Ie,[e("img",{src:"img/"+c.value.logo,alt:"",class:"w-100 h-100"},null,8,Se)])]),Fe]),e("div",Re,[e("h5",Me,n(c.value.name),1),e("p",Oe,n(c.value.email),1)])])])]),Ue])]),e("div",Be,[e("div",qe,[e("div",ze,[e("h3",Ne,[b("Rentals "),e("span",Te,n((D=(j=c.value)==null?void 0:j.rentals)==null?void 0:D.length),1)]),Le]),e("div",$e,[(f(!0),v(S,null,F(c.value.rentals,s=>(f(),v("div",Ae,[e("div",Ge,[e("div",He,[d(a(Q),{togglerText:"Dropdown button",class:"mt-1 dropdown"},{default:h(()=>[d(a(J),{component:"a",style:{color:"rgba(30, 30, 30, 1)"}},{default:h(()=>[Je]),_:1}),d(a(K),null,{default:h(()=>[d(a(R),{disabled:l.value,class:"cursor-pointer",style:{color:"black"},onClick:I=>U(s)},{default:h(()=>[Ke,b(" Cancel ")]),_:2},1032,["disabled","onClick"]),d(a(R),{onClick:I=>q(s),disabled:l.value,class:"cursor-pointer",style:{color:"black"}},{default:h(()=>[Qe,b(" Download invoice ")]),_:2},1032,["onClick","disabled"])]),_:2},1024)]),_:2},1024)]),e("div",null,[e("img",{src:"img/vehicles/"+s.vehicle.photo,alt:"Image",height:"250",width:"400"},null,8,We)]),e("div",Xe,[e("img",{src:"img/"+s.vehicle.supplier.logo,alt:"Image",height:"80",width:"80",class:"mt-3 rounded-circle border-4 border-white-color-40"},null,8,Ye)]),e("div",Ze,[e("h4",et,n(s.vehicle.name),1),e("p",null,n(s.vehicle.supplier.name),1),e("p",null,"#"+n(s.order_number),1),e("p",null,[tt,b(" "+n(s.start_date),1)]),e("p",null,[st,b(" "+n(s.end_date),1)]),e("p",null,n(s.vehicle.branch.location),1),e("div",null,[e("div",ot,[e("a",{style:{color:"white"},class:W(s.status.id===2?"btn btn-success":s.status.id===3?"btn btn-danger":s.status.id===4?"btn btn-warning":"btn btn-primary")},n(s.status.name_en),3),a(M)(s.start_date).isAfter(a(M)(Date.now()))&&s.order_status==2?(f(),v("button",{key:0,class:"btn btn-warning",onClick:I=>z(s.id)},[at,b("  Modify ")],8,lt)):X("",!0)])])])])]))),256))])]),e("div",nt,[e("div",it,[e("form",{method:"post",onSubmit:G(T,["prevent"])},[e("div",rt,[e("div",dt,[ct,e("div",ut,[d(u,{modelValue:a(t).name,"onUpdate:modelValue":o[0]||(o[0]=s=>a(t).name=s),size:"large",filterable:"",disabled:"",remote:"","reserve-keyword":"",placeholder:"Enter Full name here...","remote-show-suffix":"",loading:g.loading.value,required:""},null,8,["modelValue","loading"])])]),e("div",pt,[mt,e("div",_t,[d(_,{disabled:"",modelValue:a(t).country,"onUpdate:modelValue":o[1]||(o[1]=s=>a(t).country=s),size:"large",filterable:"",class:"col-md-8","reserve-keyword":"",placeholder:"Select Country...","remote-show-suffix":"",loading:g.loading.value,required:""},{default:h(()=>[(f(!0),v(S,null,F(g.list.value,s=>(f(),Y(p,{key:s.id,label:s.label,value:s.label},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])])]),e("div",ft,[bt,e("div",ht,[d(u,{modelValue:a(t).email,"onUpdate:modelValue":o[2]||(o[2]=s=>a(t).email=s),size:"large",filterable:"",disabled:"",remote:"","reserve-keyword":"",placeholder:"E-mail...","remote-show-suffix":"",required:""},null,8,["modelValue"])])]),e("div",vt,[gt,e("div",wt,[d(u,{modelValue:a(t).phone,"onUpdate:modelValue":o[3]||(o[3]=s=>a(t).phone=s),size:"large",filterable:"",remote:"",disabled:"","reserve-keyword":"",placeholder:"Phone Number...","remote-show-suffix":"",loading:g.loading.value,required:""},null,8,["modelValue","loading"])])])])],32)])])])])])])]),d(Z)])}}};export{Nt as default};
