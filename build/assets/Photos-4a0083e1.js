import"./base-40151e19.js";import{E as D,a as k}from "./el-table-column-d728468a.js";import"./el-checkbox-8f2d8563.js";import"./el-tooltip-fe7a3ae3.js";import"./el-scrollbar-4d76fa87.js";import{E as T}from "./el-button-7a3e83ea.js";import{E as N}from "./el-input-5a2c3fae.js";/* empty css               */import{r as l,k as P,o as B,a as h,c as f,b as o,w as M,i as q,f as z,v as L,d as r,l as i,j as S}from "./app-417fc4a4.js";/* empty css                   */import{E as v}from "./index-158940ae.js";import"./objects-a3f7d715.js";import"./_initCloneObject-5d6a36d4.js";import"./isArrayLikeObject-38992b29.js";import"./_baseIteratee-ab40514f.js";import"./flatten-66fc93b5.js";import"./index-e7076969.js";import"./use-global-config-2834e396.js";import"./typescript-8048a034.js";const U={class:"card"},$={class:"card-body"},j=o("h2",{class:"mb-4"},"Vehicles Photos",-1),F={class:"card"},I={class:"card-body"},O={class:""},A={class:"formbold-mb-3"},G=["src"],H=o("label",{class:"formbold-form-label"}," Vehicle Photo ",-1),J={class:"formbold-mb-3"},K=o("label",{class:"formbold-form-label"}," Vehicle Name ",-1),Q=o("div",{class:"text-center"},[o("button",{type:"submit",class:"btn btn-primary p-3",style:{color:"#0a3622"}},"Submit")],-1),R={class:"d-flex"},W=["src"],be={__name:"Photos",setup(X){const m=l(""),p=l(""),c=l(""),d=l(""),u=l([]),n=l(!1),b= e=>{p.value=e.target.files[0]},y=async()=>{try{const e=new FormData;e.append("photo",p.value),e.append("name",c.value);const t=await axios.post("post/photos",e);x(t.data),t.data===1&&(m.value=null,p.value=null,c.value=null)}catch(e){console.error(e)}finally{_()}},g=async(e, t)=>{try{n.value=!0;const a=await axios.post("delete/photos",t);u.value=a.data}catch(a){console.error(a)}finally{n.value=!1}},_=async()=>{try{n.value=!0;const e=await axios.get("get/photos");u.value=e.data}catch(e){console.error(e)}finally{n.value=!1}},w=P(()=>u.value.filter(e=>!d.value||e.name.toLowerCase().includes(d.value.toLowerCase()))),x= e=>{e===1?v({showClose:!0,message:"Created successfully.",type:"success"}):v.error("Oops, something went wrong.")};return B(()=>{_()}),(e, t)=>{const a=k,V=N,C=T,E=D;return h(),f("div",U,[o("div",$,[j,o("div",F,[o("div",I,[o("div",O,[o("form",{onSubmit:M(y,["prevent"])},[o("div",A,[m.value?(h(),f("img",{key:0,src:"img/vehicles"+m.value,style:{width:"300px"}},null,8,G)):q("",!0),H,o("input",{onChange:b,type:"file",class:"formbold-form-input formbold-form-file",required:""},null,32)]),o("div",J,[K,z(o("input",{"onUpdate:modelValue":t[0]||(t[0]= s=>c.value=s),type:"text",class:"formbold-form-input",required:""},null,512),[[L,c.value]])]),Q],32)]),o("div",R,[r(E,{data:w.value,style:{width:"100%"},loading:n.value,stripe:""},{default:i(()=>[r(a,{label:"Photo",prop:""},{default:i(s=>[o("img",{src:"img/vehicles/"+s.row.photo,class:"w-50"},null,8,W)]),_:1}),r(a,{label:"Vehicle",prop:"name"}),r(a,{align:"right"},{header:i(()=>[r(V,{modelValue:d.value,"onUpdate:modelValue":t[1]||(t[1]= s=>d.value=s),size:"small",placeholder:"Type to search"},null,8,["modelValue"])]),default:i(s=>[r(C,{size:"small",type:"danger",onClick: Y=>g(s.$index,s.row)},{default:i(()=>[S("Delete ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","loading"])])])])])])}}};export{be as default};
