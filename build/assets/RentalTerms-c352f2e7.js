import"./base-40151e19.js";import{E as R,a as L}from "./el-table-column-d728468a.js";import"./el-checkbox-8f2d8563.js";import"./el-tooltip-fe7a3ae3.js";import"./el-scrollbar-4d76fa87.js";import{E as M}from "./el-button-7a3e83ea.js";import{E as z}from "./el-input-5a2c3fae.js";/* empty css               */import{r as d,k as B,T as $,o as H,a as _,c as f,b as s,w as N,d as n,u as p,l as c,t as S,n as w,i as v,q as j,j as q}from "./app-417fc4a4.js";import{s as T}from "./editor.esm-0a488cd8.js";import{d as I}from "./index-5c14bedf.js";/* empty css                    */import"./objects-a3f7d715.js";import"./_initCloneObject-5d6a36d4.js";import"./isArrayLikeObject-38992b29.js";import"./_baseIteratee-ab40514f.js";import"./flatten-66fc93b5.js";import"./index-e7076969.js";import"./use-global-config-2834e396.js";import"./typescript-8048a034.js";import"./basecomponent.esm-c24a460c.js";const P={class:"card"},U={class:"card-body"},A=s("h2",{class:"mb-4"},"Rental Terms",-1),F={class:"card"},O={class:"card-body"},G={class:"row",style:{height:"300px"}},J={class:"formbold-mb-3 col-6"},K=s("label",{class:"formbold-form-label"}," Title ",-1),Q={class:"formbold-mb-3 col-6 position-relative"},W=s("label",{class:"formbold-form-label"}," Description ",-1),X=s("div",{class:"text-center"},[s("button",{type:"submit",class:"btn btn-primary"},"Submit")],-1),Y={class:"d-flex"},Z=["innerHTML"],tt=["innerHTML"],et=["onClick"],st=["onClick"],kt={__name:"RentalTerms",setup(ot){const r=I.useToast(),u=d(""),b=d([]),i=d(!1);d("");const g=d([]);d(!1),d(!1);const y=async(e, l)=>{try{i.value=!0,(await axios.post("update/rental-terms/status",{id:l,status:e})).data.status&&(r.success("Rental Term added successfully",{position:"top"}),m())}catch(a){console.error(a)}finally{i.value=!1}},m=async()=>{try{i.value=!0;const e=await axios.get("get/rental-terms");b.value=e.data,console.log(e.data)}catch(e){console.error(e)}finally{i.value=!1}},x=B(()=>b.value.filter(e=>!u.value||e.name.toLowerCase().includes(u.value.toLowerCase()))),V=async(e, l)=>{try{i.value=!0,(await axios.post("delete/rental-terms",l)).data.status&&r.success("Rental Term deleted",{position:"top"})}catch(a){r.error(a.response.data.message,{position:"top"})}finally{i.value=!1,m()}},o=$({title:"",description:""}),k=async()=>{try{const e=new FormData,l=g.value;if(o.title===""||o.title===null||o.title===void 0){r.error("Please Insert Valid Title",{position:"top"});return}if(o.description===""||o.description===null||o.description===void 0){r.error("Please Insert Valid description",{position:"top"});return}e.append("title",o.title),e.append("description",o.description);const a=await axios.post("post/rental-terms",e);a.data.status&&(r.success("Rental Term added successfully",{position:"top"}),o.reset()),console.log(a.data.status)}catch(e){r.error(e.response.data.message,{position:"top"})}finally{m()}};return H(()=>{m()}),(e, l)=>{const a=L,C=z,D=M,E=R;return _(),f("div",P,[s("div",U,[A,s("div",F,[s("div",O,[s("form",{onSubmit:N(k,["prevent"])},[s("div",G,[s("div",J,[K,n(p(T),{modelValue:p(o).title,"onUpdate:modelValue":l[0]||(l[0]= t=>p(o).title=t),type:"text",style:{height:"200px"},required:""},null,8,["modelValue"])]),s("div",Q,[W,n(p(T),{modelValue:p(o).description,"onUpdate:modelValue":l[1]||(l[1]= t=>p(o).description=t),type:"text",style:{height:"200px"},required:""},null,8,["modelValue"])])]),X],32)]),s("div",Y,[n(E,{data:x.value,style:{width:"100%"},loading:i.value,stripe:""},{default:c(()=>[n(a,{label:"Title"},{default:c(t=>[s("div",{innerHTML:t.row.title},null,8,Z)]),_:1}),n(a,{label:"Description"},{default:c(t=>[s("div",{innerHTML:t.row.description},null,8,tt)]),_:1}),n(a,{label:"Status"},{default:c(t=>[s("div",null,S(t.row.status==2?"Approved":"Pending"),1)]),_:1}),n(a,null,{header:c(()=>[n(C,{modelValue:u.value,"onUpdate:modelValue":l[2]||(l[2]= t=>u.value=t),size:"small",placeholder:"Type to search"},null,8,["modelValue"])]),default:c(t=>[t.row.status==1?(_(),f("button",{key:0,class:w("btn btn-success m-2"),size:"small",onClick: h=>y(2,t.row.id)},"Approve",8,et)):v("",!0),t.row.status==1?(_(),f("button",{key:1,class:w("btn btn-danger"),size:"small",onClick: h=>y(3,t.row.id)},"Reject",8,st)):v("",!0),t.row.status==2?(_(),j(D,{key:2,size:"small",type:"danger",onClick: h=>V(t.$index,t.row)},{default:c(()=>[q("Delete")]),_:2},1032,["onClick"])):v("",!0)]),_:1})]),_:1},8,["data","loading"])])])])])}}};export{kt as default};
